<!DOCTYPE html>
<!-- Generated with Dr.js -->
<html lang="en"><head><meta charset="utf-8"><title>F.core Reference</title>
<style type="text/css" media="screen">
html, body {
    height: 100%;
    margin: 0;
    padding: 0;
}
#dr-js {
    background: #999;
    margin: 0;
    padding: 0;
    overflow-y: hidden;
}
#src-dr-js {
    background: #000;
    margin: 1em;
    padding: 0;
}
.dr-doc {
    background: #eee;
    border-right: solid #eee 3px;
    float: right;
    font: 300 16px/1.4 "Myriad Pro", "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif;
    height: 100%;
    margin: 0;
    overflow: auto;
    padding: 0 30px;
    width: 800px;
}
.dr-toc {
    margin: 0;
    padding: 0 16px;
    background: #ddd;
    list-style: none;
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    overflow: auto;
    border-right: solid #ddd 3px;
    height: 100%;
    float: right;
    width: 240px;
}
#dr {
    margin: 0 auto;
    width: 1152px;
    height: 100%;
}
::-moz-selection {
    background: #c00;
    color: #fff;
}
::selection {
    background: #c00;
    color: #fff;
}
.dr-doc code
{
	background: #FFF;
	border-radius: 5px;
	padding: 0 6px;
	border: 1px solid #CCC;
}
.dr-doc pre code
{
	background: none;
	padding: 0;
	border: none;
}
.dr-doc code,
.dr-type em,
.dr-returns em,
.dr-property em {
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
}
.extra {
    display: none;
}
pre.code code {
    color: #fff;
}
pre.code {
    background: #333;
    color: #fff;
    overflow-x: auto;
    padding: 16px 30px;
    margin: 0 -30px;
}
code b {
    color: #e9df8f;
    font-weight: normal;
}
code i,
code i *,
code i .d {
    color: #8b9967;
    font-style: normal;
}
code .s {
    color: #e7be61;
}
code .d {
    color: #cf6a4c;
}
code .c,
code .c * {
    color: #999;
    font-style: italic;
}
em.amp {
    font-family: Baskerville, "Goudy Old Style", Palatino, "Book Antiqua", serif;
    font-style: italic;
}
dl.dr-parameters {
    margin: 8px 0;
}
dt.dr-param {
    color: #666;
    font-weight: 400;
    float: left;
    margin-right: 16px;
    min-width: 160px;
}
dd.dr-type {
    margin: 0;
}
dd.dr-description {
    display: table;
    min-height: 24px;
    border: solid 1px #eee;
}
.dr-type {
    float: left;
}
.dr-type em,
.dr-returns em,
.dr-property em {
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    background: #ccc;
    border-radius: 5px;
    float: left;
    font-size: .75em;
    font-style: normal;
    font-weight: 700;
    margin: 0 8px 0 0;
    min-width: 80px;
    padding: 2px 5px;
    text-align: center;
}
.dr-type em.amp,
.dr-returns em.amp,
.dr-property em.amp {
    float: none;
    background: none;
    font-size: 1em;
    font-weight: 400;
    font-style: italic;
    margin: 0;
    padding: 0;
    min-width: 0;
}
.dr-property em.dr-type {
    margin: 4px 16px 0 0;
}
em.dr-type-string {
    background: #e1edb1;
    color: #3d4c00;
}
em.dr-type-object {
    background: #edb1b1;
    color: #4c0000;
}
em.dr-type-function {
    background: #cfb1ed;
    color: #26004c;
}
em.dr-type-number {
    background: #b1c9ed;
    color: #001e4c;
}
em.dr-type-boolean {
    background: #b1edc9;
    color: #004c1e;
}
em.dr-type-array {
    background: #edd5b1;
    color: #4c2d00;
}
dd.dr-optional {
    display: none;
}
ol.dr-json {
    background: #ddd;
    list-style: none;
    margin: 0 -30px;
    padding: 16px 30px;
}
ol.dr-json .dr-json-key {
    float: left;
    min-width: 50px;
    margin-right: 16px;
}
ol.dr-json .dr-json-description {
    display: table;
}
ol.dr-json ol.dr-json  {
    margin: 0;
    padding: 0 0 0 50px;
}
h1 {
    font-weight: 400;
    font-size: 2.6em;
    margin: 0;
}
h2, h3, h4, h5 {
    margin: 1em 0 .5em 0;
    padding: 6px 0 0;
    font-weight: 600;
    position: relative;
}
h5 {
    font-size: 18px;
}
h4 {
    font-size: 20px;
}
h3 {
    font-size: 28px;
}
h2 {
    font-size: 38px;
}
h2.dr-class,
h3.dr-class,
h4.dr-class,
h5.dr-class {
    color: #009;
}
h2.dr-method,
h3.dr-method,
h4.dr-method,
h5.dr-method {
    color: #900;
}
h2.dr-property,
h3.dr-property,
h4.dr-property,
h5.dr-property {
    color: #090;
}
i.dr-trixie {
    border: solid 10px #eee;
    border-left-color: #999;
    height: 0;
    margin-left: -30px;
    margin-top: -10px;
    overflow: hidden;
    position: absolute;
    top: 50%;
    width: 0;
}
p.header {
    font-size: 19px;
    font-weight: 600;
    margin: 1em 0 .3em;
}
.dr-returns {
    margin-top: 16px;
}
.dr-returns .dr-title {
    float: left;
    margin-right: 16px;
    width: 160px;
}
.dr-toc a {
    display: block;
    text-decoration: none;
    color: #333;
    padding-top: 8px;
    position: relative;
    z-index: 1000;
}
.dr-toc li.dr-lvl1 a {
    padding-left: 1em;
}
.dr-toc li.dr-lvl2 a {
    padding-left: 2em;
}
.dr-toc li.dr-lvl3 a {
    padding-left: 3em;
}
.dr-toc li.dr-lvl4 a {
    padding-left: 4em;
}
.dr-toc li.dr-lvl5 a {
    padding-left: 5em;
}
.dr-toc li.dr-lvl6 a {
    padding-left: 6em;
}
.dr-toc a.dr-class {
    color: #339;
}
.dr-toc a.dr-property {
    color: #393;
}
.dr-toc a.dr-method {
    color: #933;
}
.dr-toc a:hover {
    text-shadow: 0 0 2px #333;
}
.dr-toc a.dr-class:hover {
    text-shadow: 0 0 2px #66c;
}
.dr-toc a.dr-property:hover {
    text-shadow: 0 0 2px #6c6;
}
.dr-toc a.dr-method:hover {
    text-shadow: 0 0 2px #c66;
}
a.dr-hash,
a.dr-sourceline {
    -webkit-transition: opacity 0.2s linear;
    color: #333;
    font-family: Menlo, "Arial Unicode MS", sans-serif;
    margin: 0 0 0 .3em;
    opacity: 0;
    text-decoration: none;
}
a.dr-link {
    position: relative;
    color: #3875c0;
}
a.dr-link:hover {
    text-shadow: 0 1px 2px #999;
    bottom: 1px;
    padding-bottom: 1px;
}
a.dr-link:visited {
    color: #7051bc;
}
h2:hover a.dr-hash,
h3:hover a.dr-hash,
h4:hover a.dr-hash,
h5:hover a.dr-hash,
h2:hover a.dr-sourceline,
h3:hover a.dr-sourceline,
h4:hover a.dr-sourceline,
h5:hover a.dr-sourceline {
    opacity: 1;
}
p {
    margin: 0 0 .5em;
}

.dr-source-line {
    margin: 0;
}
.dr-source-line a {
    -webkit-border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-radius: 5px;
    color: #000;
    background: #999;
    font-weight: 400;
    font-size: .75em;
    text-decoration: none;
    padding: 5px;
}
#src-dr-js code {
    background: #000;
    display: block;
    color: #fff;
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    white-space: pre;
    padding-left: 100px;
    position: relative;
    line-height: 1.2;
}
#src-dr-js code:hover {
    background: #333;
}
#src-dr-js code:hover .ln {
    color: #fff;
}
#src-dr-js code .ln {
    position: absolute;
    left: 0;
    color: #333;
    width: 70px;
    text-align: right;
}

/*Scrollbar*/
.dr-doc::-webkit-scrollbar,
.dr-toc::-webkit-scrollbar {
    width: 7px;
    height: 9px;
}
.dr-doc::-webkit-scrollbar-button:start:decrement, 
.dr-doc::-webkit-scrollbar-button:end:increment,
.dr-toc::-webkit-scrollbar-button:start:decrement, 
.dr-toc::-webkit-scrollbar-button:end:increment {
    display: block;
    height: 0;
    background-color: transparent;
}
.dr-doc::-webkit-scrollbar-track-piece,
.dr-toc::-webkit-scrollbar-track-piece {
    -webkit-border-radius: 0;
    -webkit-border-bottom-right-radius: 4px;
    -webkit-border-bottom-left-radius: 4px;
}
.dr-doc::-webkit-scrollbar-thumb:vertical,
.dr-toc::-webkit-scrollbar-thumb:vertical {
    height: 50px;
    background-color: rgba(0, 0, 0, 0.2);
    -webkit-border-radius: 4px;
}
.dr-doc::-webkit-scrollbar-thumb:horizontal,
.dr-toc::-webkit-scrollbar-thumb:horizontal {
    width: 50px;
    background-color: rgba(0, 0, 0, 0.2);
    -webkit-border-radius: 4px;
}

</style>
<style type="text/css" media="print">
html, body {
    margin: 0;
    padding: 0;
}
#dr-js {
    margin: 0;
    padding: 0;
}
#src-dr-js {
    margin: 1em;
    padding: 0;
}
.dr-doc {
    font: 300 16px/1.4 "Myriad Pro", "Helvetica Neue", Helvetica, "Arial Unicode MS", Arial, sans-serif;
    margin: 0;
    padding: 0 30px 10px;
}
.dr-toc {
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    list-style: none;
    margin: 0;
    padding: 0 16px;
	float: right;
}
.dr-toc input {
	display: none;
}
#dr {
    margin: 0 auto;
}
.dr-doc code
{
	background: #FFF;
	border-radius: 5px;
	padding: 0 6px;
	border: 1px solid #CCC;
}
.dr-doc pre code
{
	background: none;
	padding: 0;
	border: none;
}
.dr-doc code,
.dr-type em,
.dr-returns em,
.dr-property em {
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
}
.extra {
    display: none;
}
pre.code code {
    color: #000;
}
pre.code {
    background: #eee;
	border: solid 1px #ccc;
    color: #000;
    overflow-x: auto;
    padding: 16px 30px;
    margin: 0 -30px;
}
code b {
    color: #e98553;
    font-weight: normal;
}
code i,
code i *,
code i .d {
    color: #5c993f;
    font-style: normal;
}
code .s {
    color: #e7be61;
}
code .d {
    color: #cf6a4c;
}
code .c,
code .c * {
    color: #999;
    font-style: italic;
}
em.amp {
    font-family: Baskerville, "Goudy Old Style", Palatino, "Book Antiqua", serif;
    font-style: italic;
}
dl.dr-parameters {
    margin: 8px 0;
}
dt.dr-param {
    color: #666;
    font-weight: 400;
    float: left;
    margin-right: 16px;
    min-width: 160px;
}
dd.dr-type {
    margin: 0;
}
dd.dr-description {
    display: table;
    min-height: 24px;
    border: solid 1px #fff;
}
.dr-type {
    float: left;
}
.dr-type em,
.dr-returns em,
.dr-property em {
    -moz-border-radius: 5px;
    -webkit-border-radius: 5px;
    background: #ccc;
    border-radius: 5px;
    float: left;
    font-size: .75em;
    font-style: normal;
    font-weight: 700;
    margin: 0 8px 0 0;
    min-width: 80px;
    padding: 2px 5px;
    text-align: center;
}
.dr-type em.amp,
.dr-returns em.amp,
.dr-property em.amp {
    float: none;
    background: none;
    font-size: 1em;
    font-weight: 400;
    font-style: italic;
    margin: 0;
    padding: 0;
    min-width: 0;
}
.dr-property em.dr-type {
    margin: 4px 16px 0 0;
}
em.dr-type-string {
    background: #e1edb1;
    color: #3d4c00;
}
em.dr-type-object {
    background: #edb1b1;
    color: #4c0000;
}
em.dr-type-function {
    background: #cfb1ed;
    color: #26004c;
}
em.dr-type-number {
    background: #b1c9ed;
    color: #001e4c;
}
em.dr-type-boolean {
    background: #b1edc9;
    color: #004c1e;
}
em.dr-type-array {
    background: #edd5b1;
    color: #4c2d00;
}
dd.dr-optional {
    display: none;
}
ol.dr-json {
    background: #ddd;
    list-style: none;
    margin: 0 -30px;
    padding: 16px 30px;
}
ol.dr-json .dr-json-key {
    float: left;
    min-width: 50px;
    margin-right: 16px;
}
ol.dr-json .dr-json-description {
    display: table;
}
ol.dr-json ol.dr-json  {
    margin: 0;
    padding: 0 0 0 50px;
}
h1 {
    font-weight: 400;
    font-size: 2.6em;
    margin: 0;
}
h2, h3, h4, h5 {
    margin: 1em 0 .5em 0;
    padding: 6px 0 0;
    font-weight: 600;
    position: relative;
}
h5 {
    font-size: 18px;
}
h4 {
    font-size: 20px;
}
h3 {
    font-size: 28px;
}
h2 {
    font-size: 38px;
}
h2.dr-class,
h3.dr-class,
h4.dr-class,
h5.dr-class {
    color: #009;
}
h2.dr-method,
h3.dr-method,
h4.dr-method,
h5.dr-method {
    color: #900;
}
h2.dr-property,
h3.dr-property,
h4.dr-property,
h5.dr-property {
    color: #090;
}
i.dr-trixie {
	display: none;
}
p.header {
    font-size: 19px;
    font-weight: 600;
    margin: 1em 0 .3em;
}
.dr-returns {
    margin-top: 16px;
}
.dr-returns .dr-title {
    float: left;
    margin-right: 16px;
    width: 160px;
}
.dr-toc a {
    display: block;
    text-decoration: none;
    color: #333;
    padding-top: 8px;
    position: relative;
    z-index: 1000;
}
.dr-toc li.dr-lvl1 a {
    padding-left: 1em;
}
.dr-toc li.dr-lvl2 a {
    padding-left: 2em;
}
.dr-toc li.dr-lvl3 a {
    padding-left: 3em;
}
.dr-toc li.dr-lvl4 a {
    padding-left: 4em;
}
.dr-toc li.dr-lvl5 a {
    padding-left: 5em;
}
.dr-toc li.dr-lvl6 a {
    padding-left: 6em;
}
.dr-toc a.dr-class {
    color: #339;
}
.dr-toc a.dr-property {
    color: #393;
}
.dr-toc a.dr-method {
    color: #933;
}
.dr-toc a:hover {
    text-shadow: 0 0 2px #333;
}
.dr-toc a.dr-class:hover {
    text-shadow: 0 0 2px #66c;
}
.dr-toc a.dr-property:hover {
    text-shadow: 0 0 2px #6c6;
}
.dr-toc a.dr-method:hover {
    text-shadow: 0 0 2px #c66;
}
a.dr-hash,
a.dr-sourceline {
    -webkit-transition: opacity 0.2s linear;
    color: #333;
    font-family: Menlo, "Arial Unicode MS", sans-serif;
    margin: 0 0 0 .3em;
    opacity: 0;
    text-decoration: none;
}
a.dr-link {
    position: relative;
    color: #3875c0;
}
a.dr-link:hover {
    text-shadow: 0 1px 2px #999;
    bottom: 1px;
    padding-bottom: 1px;
}
a.dr-link:visited {
    color: #7051bc;
}
h2:hover a.dr-hash,
h3:hover a.dr-hash,
h4:hover a.dr-hash,
h5:hover a.dr-hash,
h2:hover a.dr-sourceline,
h3:hover a.dr-sourceline,
h4:hover a.dr-sourceline,
h5:hover a.dr-sourceline {
    opacity: 1;
}
p {
    margin: 0 0 .5em;
}

.dr-source-line {
    margin: 0;
}
.dr-source-line a {
    -webkit-border-radius: 5px;
    -webkit-border-radius: 5px;
    -moz-border-radius: 5px;
    -moz-border-radius: 5px;
    border-radius: 5px;
    border-radius: 5px;
    color: #000;
    background: #999;
    font-weight: 400;
    font-size: .75em;
    text-decoration: none;
    padding: 5px;
}
#src-dr-js code {
    background: #000;
    display: block;
    color: #fff;
    font-family: Menlo, Consolas, Monaco, "Lucida Console", monospace;
    white-space: pre;
    padding-left: 100px;
    position: relative;
    line-height: 1.2;
}
#src-dr-js code:hover {
    background: #333;
}
#src-dr-js code:hover .ln {
    color: #fff;
}
#src-dr-js code .ln {
    position: absolute;
    left: 0;
    color: #333;
    width: 70px;
    text-align: right;
}

</style>
</head>
<body id="dr-js"><div id="dr"><ol class="dr-toc" id="dr-toc"><li class="dr-lvl0"><a href="#An introduction" class="{clas}"><span>An introduction</span></a></li><li class="dr-lvl0"><a href="#Architecture" class="{clas}"><span>Architecture</span></a></li><li class="dr-lvl0"><a href="#animator" class="dr-class"><span>animator</span></a></li><li class="dr-lvl1"><a href="#animator.hmirror" class="dr-method"><span>animator.hmirror()</span></a></li><li class="dr-lvl1"><a href="#animator.next_frame" class="dr-method"><span>animator.next_frame()</span></a></li><li class="dr-lvl1"><a href="#animator.prototype" class="{clas}"><span>animator.prototype</span></a></li><li class="dr-lvl2"><a href="#animator.prototype.set" class="dr-method"><span>animator.prototype.set()</span></a></li><li class="dr-lvl1"><a href="#animator.rewind" class="dr-method"><span>animator.rewind()</span></a></li><li class="dr-lvl1"><a href="#animator.set_frame" class="dr-method"><span>animator.set_frame()</span></a></li><li class="dr-lvl0"><a href="#collision" class="{clas}"><span>collision</span></a></li><li class="dr-lvl1"><a href="#collision.circle" class="dr-method"><span>collision.circle()</span></a></li><li class="dr-lvl1"><a href="#collision.line" class="dr-method"><span>collision.line()</span></a></li><li class="dr-lvl1"><a href="#collision.point_in_rect" class="dr-method"><span>collision.point_in_rect()</span></a></li><li class="dr-lvl1"><a href="#collision.rect" class="dr-method"><span>collision.rect()</span></a></li><li class="dr-lvl1"><a href="#collision.tri" class="dr-method"><span>collision.tri()</span></a></li><li class="dr-lvl0"><a href="#combo detector" class="{clas}"><span>combo detector</span></a></li><li class="dr-lvl0"><a href="#combodec" class="dr-class"><span>combodec</span></a></li><li class="dr-lvl1"><a href="#combodec.callback" class="dr-property"><span>combodec.callback</span></a></li><li class="dr-lvl1"><a href="#combodec.clear_seq" class="dr-method"><span>combodec.clear_seq()</span></a></li><li class="dr-lvl1"><a href="#combodec.combo" class="dr-property"><span>combodec.combo</span></a></li><li class="dr-lvl1"><a href="#combodec.con" class="dr-property"><span>combodec.con</span></a></li><li class="dr-lvl1"><a href="#combodec.config" class="dr-property"><span>combodec.config</span></a></li><li class="dr-lvl1"><a href="#combodec.frame" class="dr-method"><span>combodec.frame()</span></a></li><li class="dr-lvl1"><a href="#combodec.key" class="dr-method"><span>combodec.key()</span></a></li><li class="dr-lvl1"><a href="#combodec.seq" class="dr-property"><span>combodec.seq</span></a></li><li class="dr-lvl0"><a href="#control_player" class="dr-class"><span>control_player</span></a></li><li class="dr-lvl1"><a href="#control_player.child" class="dr-property"><span>control_player.child</span></a></li><li class="dr-lvl1"><a href="#control_player.clear_states" class="dr-method"><span>control_player.clear_states()</span></a></li><li class="dr-lvl1"><a href="#control_player.fetch" class="dr-method"><span>control_player.fetch()</span></a></li><li class="dr-lvl1"><a href="#control_player.flush" class="dr-method"><span>control_player.flush()</span></a></li><li class="dr-lvl1"><a href="#control_player.frame" class="dr-method"><span>control_player.frame()</span></a></li><li class="dr-lvl1"><a href="#control_player.state" class="dr-property"><span>control_player.state</span></a></li><li class="dr-lvl1"><a href="#control_player.sync" class="dr-property"><span>control_player.sync</span></a></li><li class="dr-lvl0"><a href="#control_recorder" class="dr-class"><span>control_recorder</span></a></li><li class="dr-lvl1"><a href="#control_recorder.export_str" class="dr-method"><span>control_recorder.export_str()</span></a></li><li class="dr-lvl1"><a href="#control_recorder.frame" class="dr-method"><span>control_recorder.frame()</span></a></li><li class="dr-lvl1"><a href="#control_recorder.key" class="dr-method"><span>control_recorder.key()</span></a></li><li class="dr-lvl0"><a href="#controller" class="dr-class"><span>controller</span></a></li><li class="dr-lvl1"><a href="#controller.buf" class="dr-property"><span>controller.buf</span></a></li><li class="dr-lvl1"><a href="#controller.child" class="dr-property"><span>controller.child</span></a></li><li class="dr-lvl1"><a href="#controller.clear_states" class="dr-method"><span>controller.clear_states()</span></a></li><li class="dr-lvl1"><a href="#controller.config" class="dr-property"><span>controller.config</span></a></li><li class="dr-lvl1"><a href="#controller.fetch" class="dr-method"><span>controller.fetch()</span></a></li><li class="dr-lvl1"><a href="#controller.flush" class="dr-method"><span>controller.flush()</span></a></li><li class="dr-lvl1"><a href="#controller.key" class="dr-method"><span>controller.key()</span></a></li><li class="dr-lvl1"><a href="#controller.keycode" class="dr-property"><span>controller.keycode</span></a></li><li class="dr-lvl1"><a href="#controller.keycode_to_keyname" class="dr-method"><span>controller.keycode_to_keyname()</span></a></li><li class="dr-lvl1"><a href="#controller.keyname_to_keycode" class="dr-method"><span>controller.keyname_to_keycode()</span></a></li><li class="dr-lvl1"><a href="#controller.state" class="dr-property"><span>controller.state</span></a></li><li class="dr-lvl1"><a href="#controller.sync" class="dr-property"><span>controller.sync</span></a></li><li class="dr-lvl1"><a href="#controller.zppendix" class="{clas}"><span>controller.zppendix</span></a></li><li class="dr-lvl0"><a href="#css" class="{clas}"><span>css</span></a></li><li class="dr-lvl0"><a href="#css-build" class="{clas}"><span>css-build</span></a></li><li class="dr-lvl0"><a href="#effect_pool" class="dr-class"><span>effect_pool</span></a></li><li class="dr-lvl1"><a href="#effect_pool.call_each" class="dr-method"><span>effect_pool.call_each()</span></a></li><li class="dr-lvl1"><a href="#effect_pool.create" class="dr-method"><span>effect_pool.create()</span></a></li><li class="dr-lvl1"><a href="#effect_pool.die" class="dr-method"><span>effect_pool.die()</span></a></li><li class="dr-lvl1"><a href="#effect_pool.for_each" class="dr-method"><span>effect_pool.for_each()</span></a></li><li class="dr-lvl0"><a href="#graph" class="dr-class"><span>graph</span></a></li><li class="dr-lvl1"><a href="#graph.add" class="dr-method"><span>graph.add()</span></a></li><li class="dr-lvl1"><a href="#graph.at" class="dr-method"><span>graph.at()</span></a></li><li class="dr-lvl1"><a href="#graph.create_graph" class="dr-method"><span>graph.create_graph()</span></a></li><li class="dr-lvl1"><a href="#graph.get" class="dr-method"><span>graph.get()</span></a></li><li class="dr-lvl1"><a href="#graph.move" class="dr-method"><span>graph.move()</span></a></li><li class="dr-lvl1"><a href="#graph.remove" class="dr-method"><span>graph.remove()</span></a></li><li class="dr-lvl0"><a href="#math" class="{clas}"><span>math</span></a></li><li class="dr-lvl1"><a href="#math.add" class="dr-method"><span>math.add()</span></a></li><li class="dr-lvl1"><a href="#math.bezier2" class="dr-method"><span>math.bezier2()</span></a></li><li class="dr-lvl1"><a href="#math.distance" class="dr-method"><span>math.distance()</span></a></li><li class="dr-lvl1"><a href="#math.inbetween" class="dr-method"><span>math.inbetween()</span></a></li><li class="dr-lvl1"><a href="#math.intersect" class="dr-method"><span>math.intersect()</span></a></li><li class="dr-lvl1"><a href="#math.length" class="dr-method"><span>math.length()</span></a></li><li class="dr-lvl1"><a href="#math.negative" class="dr-method"><span>math.negative()</span></a></li><li class="dr-lvl1"><a href="#math.negligible" class="dr-method"><span>math.negligible()</span></a></li><li class="dr-lvl1"><a href="#math.normalize" class="dr-method"><span>math.normalize()</span></a></li><li class="dr-lvl1"><a href="#math.perpen" class="dr-method"><span>math.perpen()</span></a></li><li class="dr-lvl1"><a href="#math.round_d2" class="dr-method"><span>math.round_d2()</span></a></li><li class="dr-lvl1"><a href="#math.scale" class="dr-method"><span>math.scale()</span></a></li><li class="dr-lvl1"><a href="#math.signed_area" class="dr-method"><span>math.signed_area()</span></a></li><li class="dr-lvl1"><a href="#math.sub" class="dr-method"><span>math.sub()</span></a></li><li class="dr-lvl0"><a href="#sprite" class="dr-class"><span>sprite</span></a></li><li class="dr-lvl1"><a href="#sprite.add_img" class="dr-method"><span>sprite.add_img()</span></a></li><li class="dr-lvl1"><a href="#sprite.attach" class="dr-method"><span>sprite.attach()</span></a></li><li class="dr-lvl1"><a href="#sprite.hide" class="dr-method"><span>sprite.hide()</span></a></li><li class="dr-lvl1"><a href="#sprite.masterconfig" class="dr-method"><span>sprite.masterconfig()</span></a></li><li class="dr-lvl1"><a href="#sprite.remove" class="dr-method"><span>sprite.remove()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_img_xy" class="dr-method"><span>sprite.set_img_xy()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_wh" class="dr-method"><span>sprite.set_wh()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_xy" class="dr-method"><span>sprite.set_xy()</span></a></li><li class="dr-lvl1"><a href="#sprite.set_z" class="dr-method"><span>sprite.set_z()</span></a></li><li class="dr-lvl1"><a href="#sprite.show" class="dr-method"><span>sprite.show()</span></a></li><li class="dr-lvl1"><a href="#sprite.switch_img" class="dr-method"><span>sprite.switch_img()</span></a></li><li class="dr-lvl0"><a href="#states" class="dr-class"><span>states</span></a></li><li class="dr-lvl1"><a href="#states.consult" class="dr-method"><span>states.consult()</span></a></li><li class="dr-lvl1"><a href="#states.cur" class="dr-property"><span>states.cur</span></a></li><li class="dr-lvl1"><a href="#states.cur_name" class="dr-property"><span>states.cur_name</span></a></li><li class="dr-lvl1"><a href="#states.cur_state" class="dr-property"><span>states.cur_state</span></a></li><li class="dr-lvl1"><a href="#states.event" class="dr-method"><span>states.event()</span></a></li><li class="dr-lvl1"><a href="#states.event_delay" class="dr-method"><span>states.event_delay()</span></a></li><li class="dr-lvl1"><a href="#states.evlay" class="dr-property"><span>states.evlay</span></a></li><li class="dr-lvl1"><a href="#states.log" class="dr-property"><span>states.log</span></a></li><li class="dr-lvl1"><a href="#states.log_enable" class="dr-property"><span>states.log_enable</span></a></li><li class="dr-lvl1"><a href="#states.log_filter" class="dr-property"><span>states.log_filter</span></a></li><li class="dr-lvl1"><a href="#states.log_size" class="dr-property"><span>states.log_size</span></a></li><li class="dr-lvl1"><a href="#states.propagate_down" class="dr-method"><span>states.propagate_down()</span></a></li><li class="dr-lvl1"><a href="#states.propagate_up" class="dr-method"><span>states.propagate_up()</span></a></li><li class="dr-lvl1"><a href="#states.search" class="dr-method"><span>states.search()</span></a></li><li class="dr-lvl1"><a href="#states.show_log" class="dr-method"><span>states.show_log()</span></a></li><li class="dr-lvl1"><a href="#states.state" class="dr-property"><span>states.state</span></a></li><li class="dr-lvl1"><a href="#states.state_at" class="dr-method"><span>states.state_at()</span></a></li><li class="dr-lvl0"><a href="#support" class="{clas}"><span>support</span></a></li><li class="dr-lvl1"><a href="#support.css2dtransform" class="dr-property"><span>support.css2dtransform</span></a></li><li class="dr-lvl1"><a href="#support.css3dtransform" class="dr-property"><span>support.css3dtransform</span></a></li><li class="dr-lvl1"><a href="#support.mobile" class="dr-property"><span>support.mobile</span></a></li><li class="dr-lvl1"><a href="#support.prefix" class="dr-property"><span>support.prefix</span></a></li><li class="dr-lvl1"><a href="#support.version" class="dr-property"><span>support.version</span></a></li><li class="dr-lvl0"><a href="#util" class="{clas}"><span>util</span></a></li><li class="dr-lvl1"><a href="#util.arr_search" class="dr-method"><span>util.arr_search()</span></a></li><li class="dr-lvl1"><a href="#util.css" class="dr-method"><span>util.css()</span></a></li><li class="dr-lvl1"><a href="#util.extend_object" class="dr-method"><span>util.extend_object()</span></a></li><li class="dr-lvl1"><a href="#util.extract_array" class="dr-method"><span>util.extract_array()</span></a></li><li class="dr-lvl1"><a href="#util.make_array" class="dr-method"><span>util.make_array()</span></a></li><li class="dr-lvl1"><a href="#util.push_unique" class="dr-method"><span>util.push_unique()</span></a></li><li class="dr-lvl1"><a href="#util.to_text" class="dr-method"><span>util.to_text()</span></a></li><li class="dr-lvl0"><a href="#world" class="dr-class"><span>world</span></a></li><li class="dr-lvl1"><a href="#world.P" class="dr-property"><span>world.P</span></a></li><li class="dr-lvl1"><a href="#world.area" class="dr-property"><span>world.area</span></a></li><li class="dr-lvl1"><a href="#world.pan" class="dr-property"><span>world.pan</span></a></li><li class="dr-lvl1"><a href="#world.pp" class="dr-property"><span>world.pp</span></a></li><li class="dr-lvl1"><a href="#world.project" class="dr-method"><span>world.project()</span></a></li><li class="dr-lvl1"><a href="#world.project_all" class="dr-method"><span>world.project_all()</span></a></li><li class="dr-lvl1"><a href="#world.tho" class="dr-property"><span>world.tho</span></a></li><li class="dr-lvl1"><a href="#world.thp" class="dr-property"><span>world.thp</span></a></li><li class="dr-lvl1"><a href="#world.view" class="dr-method"><span>world.view()</span></a></li><li class="dr-lvl1"><a href="#world.view_all" class="dr-method"><span>world.view_all()</span></a></li><li class="dr-lvl1"><a href="#world.zoom" class="dr-property"><span>world.zoom</span></a></li></ol><div class="dr-doc"><h1>F.core Reference</h1><div class="An introduction-section"><h2 id="An introduction" class="undefined"><i class="dr-trixie">&#160;</i>An introduction<a href="#An introduction" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 16 in the source" href="https://github.com/tyt2y3/F.core/blob/master/docs/more.js#L16">&#x27ad;</a></h2>
<div class="extra" id="An introduction-extra"></div></div><p><img alt="Project F logo" src="http://2.bp.blogspot.com/-k-My1B-YlaU/T8JUBAYpu9I/AAAAAAAAACI/OnCvkzFF5jw/s1600/logo_l1_s.png"/> Project F
<a href="http://project--f.blogspot.hk/search/label/about">http://project--f.blogspot.com/</a>
</p>
<p>F.core is the core components of Project F used to build browser based fighter games.
currently, games built on top of F.core include
</p>
<p> <a href="http://tyt2y3.github.com/LFrelease/demo/demo3.html">F.LF</a>
<img alt="F.LF" src="http://tyt2y3.github.com/LFrelease/web/image/mile2013Jan.png"/>
 <a href="http://tyt2y3.github.com/teeth">teeth</a>
</p>
<p><img alt="teeth" src="http://tyt2y3.github.com/teeth/web/images/cap01.png"/>
</p>
<div class="Architecture-section"><h2 id="Architecture" class="undefined"><i class="dr-trixie">&#160;</i>Architecture<a href="#Architecture" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 50 in the source" href="https://github.com/tyt2y3/F.core/blob/master/docs/more.js#L50">&#x27ad;</a></h2>
<div class="extra" id="Architecture-extra"></div></div><p>F.core <strong>is not a game engine</strong>. F.core is a set of conceptual and functional components that can be used to build an engine.
so it is not a hard decision like Windows vs Mac when choose to use F.core. you find the parts you are interested, pull it out and use it in your game.
</p>
<p>F.core employs requirejs dependency management, and you should too, if you care to build games that has more than 1000 lines of code. requirejs can be clumsy to set up than <code>&lt;script src=&quot;&quot;&gt;</code>, but when a project grows it will pay off.
</p>
<p>F.core components can be categorized into:
</p>
<p></p>
<h4>sprites</h4>
<p><a href="#sprite" class="dr-link">sprite</a> and <a href="#animator" class="dr-link">animator</a>
</p>
<p></p>
<h4>keyboard controller system</h4>
<p><a href="#controller" class="dr-link">controller</a>,
<a href="#combodec" class="dr-link">combodec</a> (combo detector) with
<a href="#control_recorder" class="dr-link">control_recorder</a> and
<a href="#control_player" class="dr-link">control_player</a>.
</p>
<p></p>
<h4>math</h4>
<p>some <a href="#collision" class="dr-link">collision</a> detection and <a href="#math" class="dr-link">math</a> functions and javascript <a href="#util" class="dr-link">util</a>
</p>
<p><a href="#world" class="dr-link">world</a> for 3d to 2d projection
</p>
<p></p>
<h4>system programming</h4>
<p><a href="#states" class="dr-link">states</a> oriented programming in hierarchical state machines
</p>
<p></p>
<h4>entities management</h4>
<p><a href="#effect_pool" class="dr-link">effect_pool</a> for managing effects and
<a href="#graph" class="dr-link">graph</a> for hashing objects
</p>
<p></p>
<h4>web application</h4>
<p><a href="#css" class="dr-link">css</a> for loading and optimizing css files and 
<a href="#support" class="dr-link">support</a> to check for browser support
</p>
<div class="animator-section"><h2 id="animator" class="dr-class"><i class="dr-trixie">&#160;</i>animator(config)<a href="#animator" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 29 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/animator.js#L29">&#x27ad;</a></h2>
<div class="extra" id="animator-extra"></div></div><div class="dr-class"><p><li>animate sprites</li>
<li>support multiple animation sequence on the same image</li>
</p>
<dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code>{
	x:<span class="d">0</span>,y:<span class="d">0</span>,     <span class="c">//top left margin of the frames</span>
	w:<span class="d">100</span>, h:<span class="d">100</span>,<span class="c">//width, height of a frame</span>
	gx:<span class="d">4</span>,gy:<span class="d">4</span>,   <span class="c">//define a gx*gy grid of frames</span>
	tar:         <span class="c">//target @sprite</span>
	ani:         <span class="c">//animation sequence:</span>
		<b>null</b>,    <span class="c">//<b>if</b> <b>undefined</b>, loop through top left to lower right, row by row</span>
		[<span class="d">0</span>,<span class="d">1</span>,<span class="d">2</span>,<span class="d">1</span>,<span class="d">0</span>],<span class="c">//use custom frame sequence</span>
	borderright: <span class="d">1</span>, <span class="c">//[optionals] trim the right edge pixels away</span>
	borderbottom: <span class="d">1</span>,
	borderleft: <span class="d">1</span>,
	bordertop: <span class="d">1</span>
}
</code></pre>
<p>multiple animators reference to the same config, so dont play with it in runtime
</p>
<p><a href="../sample/sprite.html">example</a>
</p>
<iframe src="../sample/sprite.html" width="400" height="250"></iframe>
<img src="../sample/test_sprite.png" width="300">
</div><div class="animator-hmirror-section"><h3 id="animator.hmirror" class="dr-method"><i class="dr-trixie">&#160;</i>animator.hmirror(val)<a href="#animator.hmirror" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 104 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/animator.js#L104">&#x27ad;</a></h3>
<div class="extra" id="animator.hmirror-extra"></div></div><div class="dr-method"><p>set the horizontal mirror mode
</p>
<dl class="dr-parameters"><dt class="dr-param">val</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">true: mirrored, false: normal</dd>
</dl>
</div><div class="animator-next_frame-section"><h3 id="animator.next_frame" class="dr-method"><i class="dr-trixie">&#160;</i>animator.next_frame()<a href="#animator.next_frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 64 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/animator.js#L64">&#x27ad;</a></h3>
<div class="extra" id="animator.next_frame-extra"></div></div><div class="dr-method"><p>turn to the next frame
</p>
<p>if <code>config.ani</code> exists, will go to the next frame of animation sequence
</p>
<p>otherwise, loop through top left to lower right, row by row
</p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">index of the frame just shown</span></p>
</div><div class="animator-prototype-section"><h3 id="animator.prototype" class="undefined"><i class="dr-trixie">&#160;</i>animator.prototype<a href="#animator.prototype" title="Link to this section" class="dr-hash">&#x2693;</a></h3>
<div class="extra" id="animator.prototype-extra"></div></div><div class="animator-prototype-set-section"><h4 id="animator.prototype.set" class="dr-method"><i class="dr-trixie">&#160;</i>animator.prototype.set(set_config, [base])<a href="#animator.prototype.set" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 157 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/animator.js#L157">&#x27ad;</a></h4>
<div class="extra" id="animator.prototype.set-extra"></div></div><div class="dr-method"><p>a helper function to constructor a set of animators
</p>
<p>animator set is a method. do <strong>not</strong> <code>var ani = new animator_set(..)</code>
</p>
<dl class="dr-parameters"><dt class="dr-param">set_config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[base]</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p></p>
<p></p>
<pre class="javascript code"><code>set_config=
{
<i>'base'</i>: <span class="c">//<b>default</b> parameters, must be specified as base when calling animator_set</span>
{
	x:<span class="d">0</span>,y:<span class="d">0</span>,     <span class="c">//top left margin of the frames</span>
	w:L, h:L,    <span class="c">//width, height of a frame</span>
	gx:<span class="d">4</span>,gy:<span class="d">1</span>,   <span class="c">//define a gx*gy grid of frames</span>
	tar:<b>null</b>,    <span class="c">//target sprite</span>
},

<i>'standing'</i>:
{	<span class="c">//change only values you want to</span>
	x:<span class="d">0</span>,y:<span class="d">0</span>,     <span class="c">//top left margin of the frames</span>
	gx:<span class="d">4</span>,gy:<span class="d">1</span>    <span class="c">//define a gx*gy grid of frames</span>
} <span class="c">//,,,</span>
}
<b>var</b> set<span class="s"> = </span>animator_set(set_config,<i>'base'</i>)
</code></pre>
</div><div class="animator-rewind-section"><h3 id="animator.rewind" class="dr-method"><i class="dr-trixie">&#160;</i>animator.rewind()<a href="#animator.rewind" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 49 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/animator.js#L49">&#x27ad;</a></h3>
<div class="extra" id="animator.rewind-extra"></div></div><div class="dr-method"><p>return to the first frame of animation sequence
</p>
</div><div class="animator-set_frame-section"><h3 id="animator.set_frame" class="dr-method"><i class="dr-trixie">&#160;</i>animator.set_frame(i)<a href="#animator.set_frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 93 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/animator.js#L93">&#x27ad;</a></h3>
<div class="extra" id="animator.set_frame-extra"></div></div><div class="dr-method"><p>set to a particular frame
</p>
<dl class="dr-parameters"><dt class="dr-param">i</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">frame index</dd>
</dl>
</div><div class="collision-section"><h2 id="collision" class="undefined"><i class="dr-trixie">&#160;</i>collision<a href="#collision" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 9 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/collision.js#L9">&#x27ad;</a></h2>
<div class="extra" id="collision-extra"></div></div><p>collision detection function set
</p>
<p>all functions return <code>true</code> if intersect
</p>
<p><a href="../sample/collision.html">example</a>
</p>
<div class="collision-circle-section"><h3 id="collision.circle" class="dr-method"><i class="dr-trixie">&#160;</i>collision.circle(A,B)<a href="#collision.circle" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 120 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/collision.js#L120">&#x27ad;</a></h3>
<div class="extra" id="collision.circle-extra"></div></div><p>circle-circle intersect test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A,B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{center,radius}</code></dd>
</dl>
<p>where center is in form <code>{x,y}</code>, radius is a <code>number</code>
</p>
</div><div class="collision-line-section"><h3 id="collision.line" class="dr-method"><i class="dr-trixie">&#160;</i>collision.line(A,B,C,D)<a href="#collision.line" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 131 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/collision.js#L131">&#x27ad;</a></h3>
<div class="extra" id="collision.line-extra"></div></div><p>line-line intersect test, true if line AB intersects CD
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A,B,C,D</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{x,y}</code></dd>
</dl>
</div><div class="collision-point_in_rect-section"><h3 id="collision.point_in_rect" class="dr-method"><i class="dr-trixie">&#160;</i>collision.point_in_rect(P, R)<a href="#collision.point_in_rect" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 145 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/collision.js#L145">&#x27ad;</a></h3>
<div class="extra" id="collision.point_in_rect-extra"></div></div><p>point in rectangle test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{x,y}</code></dd>
<dt class="dr-param">R</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form <code>{left,top,right,bottom}</code></dd>
</dl>
</div><div class="collision-rect-section"><h3 id="collision.rect" class="dr-method"><i class="dr-trixie">&#160;</i>collision.rect(rect1, rect2)<a href="#collision.rect" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 22 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/collision.js#L22">&#x27ad;</a></h3>
<div class="extra" id="collision.rect-extra"></div></div><p>rectangle-rectangle intersect test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">rect1</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">rect2</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in form of <code>{left,top,right,bottom}</code></dd>
</dl>
</div><div class="collision-tri-section"><h3 id="collision.tri" class="dr-method"><i class="dr-trixie">&#160;</i>collision.tri(A,B)<a href="#collision.tri" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 53 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/collision.js#L53">&#x27ad;</a></h3>
<div class="extra" id="collision.tri-extra"></div></div><p>triangle-triangle intersect test
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A,B</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">array of points in form <code>{x,y}</code></dd>
</dl>
</div><div class="combo detector-section"><h2 id="combo detector" class="undefined"><i class="dr-trixie">&#160;</i>combo detector<a href="#combo detector" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 8 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L8">&#x27ad;</a></h2>
<div class="extra" id="combo detector-extra"></div></div><p><li>listen key events and detect combo from a controller</li>
<li>maintains a clean sequence of pressed keys and fire events when combo is detected</li>
<li>King of Fighter style combos</li>
<li>eliminating auto-repeated keys</li>
</p>
<div class="combodec-section"><h2 id="combodec" class="dr-class"><i class="dr-trixie">&#160;</i>combodec(controller, config, combo)<a href="#combodec" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 41 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L41">&#x27ad;</a></h2>
<div class="extra" id="combodec-extra"></div></div><div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">controller</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">a reference to <a href="#controller" class="dr-link">controller</a></dd>
<dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">combo</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">combo definition</dd>
</dl>
<pre class="javascript code"><code><b>var</b> con_config=
{
	up:<i>'h'</i>,down:<i>'n'</i>,left:<i>'b'</i>,right:<i>'m'</i>,def:<i>'v'</i>,jump:<i>'f'</i>,att:<i>'d'</i>
	<span class="c">//,<i>'control name'</i>:<i>'control key'</i>,,,</span>
}
<b>var</b> con<span class="s"> = </span><b>new</b> controller(con_config);
<b>var</b> dec_config=
{
	rp:     <span class="c">//[optional] max repeat count of each key, unlimited <b>if</b> not stated</span>
	timeout:<span class="c">//time before clearing the sequence buffer <b>in</b> terms of frames</span>
	comboout: <span class="c">//the max time interval between keys to make a combo</span>
	callback: <span class="c">//callback <b>function</b> when combo detected</span>
};
<b>var</b> combo<span class="s"> = </span>[
{
	name: <i>'blast'</i>,	<span class="c">//combo name</span>
	seq:  [<i>'def'</i>,<i>'right'</i>,<i>'att'</i>], <span class="c">//array of key sequence</span>
	interrupt: <b>true</b> <span class="c">//[optional] <b>if</b> <b>true</b>, will prevent other combo extending the current combo</span>
} <span class="c">//,,,</span>
];
<b>var</b> dec<span class="s"> = </span><b>new</b> combodec ( con, dec_config, combo);
</code></pre>
<p><a href="../sample/combo.html">example</a>
</p>
<iframe src="../sample/combo.html" width="800" height="500"></iframe>
</div><div class="combodec-callback-section"><h3 id="combodec.callback" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.callback<a href="#combodec.callback" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 72 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L72">&#x27ad;</a></h3>
<div class="extra" id="combodec.callback-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="combodec-clear_seq-section"><h3 id="combodec.clear_seq" class="dr-method"><i class="dr-trixie">&#160;</i>combodec.clear_seq()<a href="#combodec.clear_seq" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 145 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L145">&#x27ad;</a></h3>
<div class="extra" id="combodec.clear_seq-extra"></div></div><p>clear the key sequence
</p>
<div class="dr-method"><p>normally you would not need to call this manually
</p>
</div><div class="combodec-combo-section"><h3 id="combodec.combo" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.combo<a href="#combodec.combo" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 78 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L78">&#x27ad;</a></h3>
<div class="extra" id="combodec.combo-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">combo list</dd>
</dl>
<div class="dr-property"></div><div class="combodec-con-section"><h3 id="combodec.con" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.con<a href="#combodec.con" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 51 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L51">&#x27ad;</a></h3>
<div class="extra" id="combodec.con-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">parent controller</dd>
</dl>
<div class="dr-property"></div><div class="combodec-config-section"><h3 id="combodec.config" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.config<a href="#combodec.config" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 66 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L66">&#x27ad;</a></h3>
<div class="extra" id="combodec.config-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="combodec-frame-section"><h3 id="combodec.frame" class="dr-method"><i class="dr-trixie">&#160;</i>combodec.frame()<a href="#combodec.frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 155 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L155">&#x27ad;</a></h3>
<div class="extra" id="combodec.frame-extra"></div></div><p>a tick of time
</p>
<div class="dr-method"></div><div class="combodec-key-section"><h3 id="combodec.key" class="dr-method"><i class="dr-trixie">&#160;</i>combodec.key(k, down)<a href="#combodec.key" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 89 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L89">&#x27ad;</a></h3>
<div class="extra" id="combodec.key-extra"></div></div><p>supply keys to combodec
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">k</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">key name</dd>
<dt class="dr-param">down</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>note that it receives key name, i.e. <code>up</code>,<code>down</code> rather than <code>w</code>,<code>s</code>
</p>
</div><div class="combodec-seq-section"><h3 id="combodec.seq" class="dr-property"><i class="dr-trixie">&#160;</i>combodec.seq<a href="#combodec.seq" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 60 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/combodec.js#L60">&#x27ad;</a></h3>
<div class="extra" id="combodec.seq-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">the key input sequence. note that combodec logs key names rather than key stroke,</dd>
</dl>
<p>i.e. <code>up</code>,<code>down</code> rather than <code>w</code>,<code>s</code>
</p>
<p>will be cleared regularly as defined by <code>config.timeout</code>
</p>
<div class="dr-property"></div><div class="control_player-section"><h2 id="control_player" class="dr-class"><i class="dr-trixie">&#160;</i>control_player(control_config, record)<a href="#control_player" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 72 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L72">&#x27ad;</a></h2>
<div class="extra" id="control_player-extra"></div></div><p>control player to playback activity of a controller
</p>
<div class="dr-class"><p>compatible with <a href="#controller" class="dr-link">controller</a> and please refer to controller for specification
</p>
<dl class="dr-parameters"><dt class="dr-param">control_config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">config used for controller</dd>
<dt class="dr-param">record</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="control_player-child-section"><h3 id="control_player.child" class="dr-property"><i class="dr-trixie">&#160;</i>control_player.child<a href="#control_player.child" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 90 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L90">&#x27ad;</a></h3>
<div class="extra" id="control_player.child-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="control_player-clear_states-section"><h3 id="control_player.clear_states" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.clear_states()<a href="#control_player.clear_states" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 128 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L128">&#x27ad;</a></h3>
<div class="extra" id="control_player.clear_states-extra"></div></div><div class="dr-method"></div><div class="control_player-fetch-section"><h3 id="control_player.fetch" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.fetch()<a href="#control_player.fetch" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 112 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L112">&#x27ad;</a></h3>
<div class="extra" id="control_player.fetch-extra"></div></div><div class="dr-method"></div><div class="control_player-flush-section"><h3 id="control_player.flush" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.flush()<a href="#control_player.flush" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 133 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L133">&#x27ad;</a></h3>
<div class="extra" id="control_player.flush-extra"></div></div><div class="dr-method"></div><div class="control_player-frame-section"><h3 id="control_player.frame" class="dr-method"><i class="dr-trixie">&#160;</i>control_player.frame()<a href="#control_player.frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 102 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L102">&#x27ad;</a></h3>
<div class="extra" id="control_player.frame-extra"></div></div><p>a tick of time
</p>
<div class="dr-method"></div><div class="control_player-state-section"><h3 id="control_player.state" class="dr-property"><i class="dr-trixie">&#160;</i>control_player.state<a href="#control_player.state" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 82 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L82">&#x27ad;</a></h3>
<div class="extra" id="control_player.state-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="control_player-sync-section"><h3 id="control_player.sync" class="dr-property"><i class="dr-trixie">&#160;</i>control_player.sync<a href="#control_player.sync" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 96 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L96">&#x27ad;</a></h3>
<div class="extra" id="control_player.sync-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<div class="dr-property"></div><div class="control_recorder-section"><h2 id="control_recorder" class="dr-class"><i class="dr-trixie">&#160;</i>control_recorder(target_controller)<a href="#control_recorder" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 12 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L12">&#x27ad;</a></h2>
<div class="extra" id="control_recorder-extra"></div></div><div class="dr-class"><p>controller recorder to record activity of a controller
</p>
<dl class="dr-parameters"><dt class="dr-param">target_controller</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">target <a href="#controller" class="dr-link">controller</a></dd>
</dl>
</div><div class="control_recorder-export_str-section"><h3 id="control_recorder.export_str" class="dr-method"><i class="dr-trixie">&#160;</i>control_recorder.export_str()<a href="#control_recorder.export_str" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 47 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L47">&#x27ad;</a></h3>
<div class="extra" id="control_recorder.export_str-extra"></div></div><p>export to JSON
</p>
<div class="dr-method"><p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">JSON</span></p>
</div><div class="control_recorder-frame-section"><h3 id="control_recorder.frame" class="dr-method"><i class="dr-trixie">&#160;</i>control_recorder.frame()<a href="#control_recorder.frame" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 37 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L37">&#x27ad;</a></h3>
<div class="extra" id="control_recorder.frame-extra"></div></div><p>a tick of time
</p>
<div class="dr-method"><p>the recorder records in discrete time sequence, if your game is not exactly in discrete time,
i.e. changes take effect <strong>immdiately</strong> upon receiving key inputs rather than delayed until
this next time unit, your game is said to be non-time-deterministic, and theoretically
you cannot record and playback key inputs and receive <strong>exact same</strong> result,
but generally speaking if the recording fps is high enough the error will be small
</p>
</div><div class="control_recorder-key-section"><h3 id="control_recorder.key" class="dr-method"><i class="dr-trixie">&#160;</i>control_recorder.key(k, down)<a href="#control_recorder.key" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 23 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller-recorder.js#L23">&#x27ad;</a></h3>
<div class="extra" id="control_recorder.key-extra"></div></div><p>supply keys to control_recorder
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">k</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">key name</dd>
<dt class="dr-param">down</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="controller-section"><h2 id="controller" class="dr-class"><i class="dr-trixie">&#160;</i>controller(config)<a href="#controller" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 59 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L59">&#x27ad;</a></h2>
<div class="extra" id="controller-extra"></div></div><p>keyboard controller
<li>controllers for multiple players on the same keyboard</li>
<li>maintains a table of key states</li>
<li>generate key events for child controllers</li>
<li>buffered mode: buffer inputs and fetch only once a loop</li>
<li>never drops keys</li>
see <a href="http://project--f.blogspot.hk/2012/11/keyboard-controller.html">http://project--f.blogspot.hk/2012/11/keyboard-controller.html</a> for technical explaination
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code><b>var</b> con_config=
{
	up:<i>'h'</i>,down:<i>'n'</i>,left:<i>'b'</i>,right:<i>'m'</i>,def:<i>'v'</i>,jump:<i>'f'</i>,att:<i>'d'</i>
	<span class="c">//,<i>'control name'</i>:<i>'control key'</i>,,,</span>
}
<b>var</b> con<span class="s"> = </span><b>new</b> controller(con_config);
</code></pre>
</div><div class="controller-buf-section"><h3 id="controller.buf" class="dr-property"><i class="dr-trixie">&#160;</i>controller.buf<a href="#controller.buf" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 113 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L113">&#x27ad;</a></h3>
<div class="extra" id="controller.buf-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>the array of keyname of buffered key input
</p>
</div><div class="controller-child-section"><h3 id="controller.child" class="dr-property"><i class="dr-trixie">&#160;</i>controller.child<a href="#controller.child" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 94 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L94">&#x27ad;</a></h3>
<div class="extra" id="controller.child-extra"></div></div><div class="dr-property"><p>child systems that has the method <code>key(name,down)</code>
</p>
<p>push a child into this array to listen to key events
</p>
<p>see <a href="#combodec.key" class="dr-link">combodec.key</a>
</p>
</div><div class="controller-clear_states-section"><h3 id="controller.clear_states" class="dr-method"><i class="dr-trixie">&#160;</i>controller.clear_states()<a href="#controller.clear_states" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 155 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L155">&#x27ad;</a></h3>
<div class="extra" id="controller.clear_states-extra"></div></div><p>clear the key state table
</p>
<div class="dr-method"></div><div class="controller-config-section"><h3 id="controller.config" class="dr-property"><i class="dr-trixie">&#160;</i>controller.config<a href="#controller.config" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 77 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L77">&#x27ad;</a></h3>
<div class="extra" id="controller.config-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>note that controller still keeps a reference to the config object
</p>
</div><div class="controller-fetch-section"><h3 id="controller.fetch" class="dr-method"><i class="dr-trixie">&#160;</i>controller.fetch()<a href="#controller.fetch" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 165 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L165">&#x27ad;</a></h3>
<div class="extra" id="controller.fetch-extra"></div></div><p>fetch for inputs received since the last fetch, will flush buffer afterwards
</p>
<div class="dr-method"></div><div class="controller-flush-section"><h3 id="controller.flush" class="dr-method"><i class="dr-trixie">&#160;</i>controller.flush()<a href="#controller.flush" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 183 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L183">&#x27ad;</a></h3>
<div class="extra" id="controller.flush-extra"></div></div><p>flush the buffer manually
</p>
<div class="dr-method"></div><div class="controller-key-section"><h3 id="controller.key" class="dr-method"><i class="dr-trixie">&#160;</i>controller.key(e, down)<a href="#controller.key" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 124 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L124">&#x27ad;</a></h3>
<div class="extra" id="controller.key-extra"></div></div><div class="dr-method"><p>supply events to controller
</p>
<p>master controller will do this automatically
</p>
<dl class="dr-parameters"><dt class="dr-param">e</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">keycode</dd>
<dt class="dr-param">down</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="controller-keycode-section"><h3 id="controller.keycode" class="dr-property"><i class="dr-trixie">&#160;</i>controller.keycode<a href="#controller.keycode" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 84 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L84">&#x27ad;</a></h3>
<div class="extra" id="controller.keycode-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>the keycode for each key
</p>
</div><div class="controller-keycode_to_keyname-section"><h3 id="controller.keycode_to_keyname" class="dr-method"><i class="dr-trixie">&#160;</i>controller.keycode_to_keyname(keycode)<a href="#controller.keycode_to_keyname" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 275 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L275">&#x27ad;</a></h3>
<div class="extra" id="controller.keycode_to_keyname-extra"></div></div><p>convert keycode back to keyname
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">keycode</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-string">string</em> <span class="dr-description">keyname </span></p>
</div><div class="controller-keyname_to_keycode-section"><h3 id="controller.keyname_to_keycode" class="dr-method"><i class="dr-trixie">&#160;</i>controller.keyname_to_keycode(keyname)<a href="#controller.keyname_to_keycode" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 219 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L219">&#x27ad;</a></h3>
<div class="extra" id="controller.keyname_to_keycode-extra"></div></div><p>convert keyname to keycode
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">keyname</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">keycode </span></p>
<p>note that some keycode is not the same across all browsers, 
for details consult <a href="http://www.quirksmode.org/js/keys.html">http://www.quirksmode.org/js/keys.html</a>
</p>
</div><div class="controller-state-section"><h3 id="controller.state" class="dr-property"><i class="dr-trixie">&#160;</i>controller.state<a href="#controller.state" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 70 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L70">&#x27ad;</a></h3>
<div class="extra" id="controller.state-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>table of key states
</p>
<p>note that keys are indexed by their names, i.e. <code>up</code>,<code>down</code> rather than <code>w</code>,<code>s</code>
</p>
<pre class="javascript code"><code>con.state.down <span class="c">//check <b>if</b> the `down` key is pressed down</span>
</code></pre>
</div><div class="controller-sync-section"><h3 id="controller.sync" class="dr-property"><i class="dr-trixie">&#160;</i>controller.sync<a href="#controller.sync" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 106 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L106">&#x27ad;</a></h3>
<div class="extra" id="controller.sync-extra"></div></div><p>controllers can work in 2 modes, sync and async
</p>
<div class="dr-property"><p>if <code>sync===false</code>, a key up-down event will be dispatched to all child <strong>immediately</strong>.
</p>
<p>if <code>sync===true</code>, a key up-down event will be buffered, and must be <code>fetch</code> manually.
there are very good reasons to architect your game in synchronous mode
<li>time-determinism; see <a href="#control_recorder.frame" class="dr-link">control_recorder.frame</a></li>
<li>never drop keys; see <a href="http://project--f.blogspot.hk/2012/11/keyboard-controller.html">http://project--f.blogspot.hk/2012/11/keyboard-controller.html</a></li>
</p>
</div><div class="controller-zppendix-section"><h3 id="controller.zppendix" class="undefined"><i class="dr-trixie">&#160;</i>controller.zppendix<a href="#controller.zppendix" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 208 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/controller.js#L208">&#x27ad;</a></h3>
<div class="extra" id="controller.zppendix-extra"></div></div><p>on the other hand, there can be other controllers with compatible definition and behavior,
(e.g. AI controller, network player controller, record playback controller)
<li>has the properties <code>state</code>, <code>config</code>, <code>child</code>, <code>sync</code></li>
<li>behavior: call the <code>key</code> method of every member of <code>child</code> when keys arrive</li>
<li>has the method <code>clear_states</code>, <code>fetch</code> and <code>flush</code></li>
<li>behavior: if <code>sync</code> is true, the controller should buffer key inputs,</li>
and only dispatch to child when <code>fetch</code> is called,
and flush the buffer when <code>flush</code> is called
</p>
<div class="css-section"><h2 id="css" class="undefined"><i class="dr-trixie">&#160;</i>css<a href="#css" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 13 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/css.js#L13">&#x27ad;</a></h2>
<div class="extra" id="css-extra"></div></div><p>css is a requirejs plugin that loads a css file and inject it into a page.
</p>
<p>note that this loader will return immediately,
regardless of whether the browser had finished parsing the stylesheet.
</p>
<p>this css loader is implemented for file optimization and depedency managment
</p>
<pre class="javascript code"><code>requirejs([<i>'css!style.css'</i>,<i>'css!more.css'</i>],<b>function</b>(css1,css2){
console.log(css1+<i>','</i>+css2); <span class="c">//<b>true</b> <b>if</b> successfully loaded</span>
});
</code></pre>
<div class="css-build-section"><h2 id="css-build" class="undefined"><i class="dr-trixie">&#160;</i>css-build<a href="#css-build" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 5 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/css-build.js#L5">&#x27ad;</a></h2>
<div class="extra" id="css-build-extra"></div></div><p>plugin builder for requirejs optimization
</p>
<div class="effect_pool-section"><h2 id="effect_pool" class="dr-class"><i class="dr-trixie">&#160;</i>effect_pool(config)<a href="#effect_pool" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 44 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/effects-pool.js#L44">&#x27ad;</a></h2>
<div class="extra" id="effect_pool-extra"></div></div><p>an effects pool manages a pool of effect instances using a circular array.
<li>each <code>effect</code> instance have the same life time, starting by <code>born</code> and end upon <code>die</code>.</li>
<li>effect that born earlier should always die earlier</li>
<li>when the pool is full, it can optionally expands</li>
</p>
<p>this is particularly useful in creating game effects.
say, you have an explosion visual effect that would be created 30 times per second
, that frequent object constructions create an overhead.
</p>
<p><li>effect class should have methods <code>born</code> and <code>die</code></li>
<li>each effect instance will be injected a <code>parent</code> property</li>
 which is a reference to the containing effects pool,
 so that an instance can die spontaneously
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>{
</p>
<dl class="dr-parameters"><dt class="dr-param"> init_size</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> batch_size</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> max_size</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param"> construct</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">should return newly created instances of effect</dd>
</dl>
<p>}
</p>
<pre class="javascript code"><code><b>var</b> ef_config=
{
	init_size: <span class="d">5</span>,
	batch_size: <span class="d">5</span>,
	max_size: <span class="d">100</span>,
	construct: <b>function</b>()
	{
		<b>return</b> <b>new</b> box_effect(<span class="d">1</span>);
	}
};
<b>var</b> effects<span class="s"> = </span><b>new</b> Effects_pool(ef_config);
</code></pre>
<p><a href="../sample/effects-pool.html">example</a>
</p>
<iframe src="../sample/effects-pool.html" width="800" height="100"></iframe>
</div><div class="effect_pool-call_each-section"><h3 id="effect_pool.call_each" class="dr-method"><i class="dr-trixie">&#160;</i>effect_pool.call_each(fun_name, arg)<a href="#effect_pool.call_each" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 194 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/effects-pool.js#L194">&#x27ad;</a></h3>
<div class="extra" id="effect_pool.call_each-extra"></div></div><div class="dr-method"><p>call a method of each active instance, in the order of oldest to youngest
</p>
<dl class="dr-parameters"><dt class="dr-param">fun_name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">method name</dd>
<dt class="dr-param">arg</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">extra args will be passed through</dd>
</dl>
</div><div class="effect_pool-create-section"><h3 id="effect_pool.create" class="dr-method"><i class="dr-trixie">&#160;</i>effect_pool.create(arg)<a href="#effect_pool.create" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 84 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/effects-pool.js#L84">&#x27ad;</a></h3>
<div class="extra" id="effect_pool.create-extra"></div></div><div class="dr-method"><p>activate an effect by calling <code>born</code>
</p>
<dl class="dr-parameters"><dt class="dr-param">arg</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">args will be passed through to <code>born</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">false if not okay</span></p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">reference to the new born effect if okay</span></p>
<p class="header">Details
<p>if the pool is full (all instances of effects are active) and <strong>after</strong> expanding
the size is still smaller than or equal to <code>config.max_size</code>,
will expand the pool by size <code>config.batch_size</code>
</p>
<p>if the pool is full and not allowed to expand, return false immediately
</p>
</div><div class="effect_pool-die-section"><h3 id="effect_pool.die" class="dr-method"><i class="dr-trixie">&#160;</i>effect_pool.die(arg)<a href="#effect_pool.die" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 132 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/effects-pool.js#L132">&#x27ad;</a></h3>
<div class="extra" id="effect_pool.die-extra"></div></div><div class="dr-method"><p>deactivate the oldest effect instance by calling <code>die</code>
</p>
<dl class="dr-parameters"><dt class="dr-param">arg</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">args will be passed through to <code>die</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">a reference to the instance that died</span></p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-undefined">undefined</em> <span class="dr-description">if there is actually no active effect</span></p>
</div><div class="effect_pool-for_each-section"><h3 id="effect_pool.for_each" class="dr-method"><i class="dr-trixie">&#160;</i>effect_pool.for_each(fun)<a href="#effect_pool.for_each" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 163 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/effects-pool.js#L163">&#x27ad;</a></h3>
<div class="extra" id="effect_pool.for_each-extra"></div></div><div class="dr-method"><p>iterate through all active instances, in the order of oldest to youngest
</p>
<dl class="dr-parameters"><dt class="dr-param">fun</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code>efpool.for_each(<b>function</b>(e)
{
	e.hi();
})
</code></pre>
</div><div class="graph-section"><h2 id="graph" class="dr-class"><i class="dr-trixie">&#160;</i>graph(config)<a href="#graph" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 27 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L27">&#x27ad;</a></h2>
<div class="extra" id="graph-extra"></div></div><p>to maintain a graph
</p>
<div class="dr-class"><p>a graph is a mapping/hashing of objects in finite 2d world into a 2d array
for example, can be used in collision detection system to boost performance.
speaking performance, however, there is considerable overhead in maintaining a graph,
and factors like cell size and number of objects in scene impact performance the most and
must be chosen carefully. and today&#39;s javascript is really too fast to care about algorithm
while most probably the bottleneck is from rendering.
you never know until I experiment on this, see <a href="../sample/graph.html">example</a>
</p>
<dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code><b>var</b> gh_config=
{
	width: w, <span class="c">//width</span>
	height: h,<span class="c">//   and height of the 2d world</span>
	gridx: gx,<span class="c">//make a</span>
	gridy: gy,<span class="c">//   gx*gy sized 2d array</span>
		<span class="c">//specify only (gridx,gridy) OR (cellx,celly)</span>
	cellx: cx,<span class="c">//the size of</span>
	celly: cy <span class="c">//   each cell is cx*cy</span>
}
</code></pre>
</div><div class="graph-add-section"><h3 id="graph.add" class="dr-method"><i class="dr-trixie">&#160;</i>graph.add(i, P)<a href="#graph.add" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 107 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L107">&#x27ad;</a></h3>
<div class="extra" id="graph.add-extra"></div></div><p>add an object <code>i</code> at point <code>P</code>
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">i</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code> point in world space</dd>
</dl>
</div><div class="graph-at-section"><h3 id="graph.at" class="dr-method"><i class="dr-trixie">&#160;</i>graph.at(P)<a href="#graph.at" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 70 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L70">&#x27ad;</a></h3>
<div class="extra" id="graph.at-extra"></div></div><p>convert P from world space to grid space
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code> point in world space</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description"><code>{x,y}</code> index in grid space</span></p>
</div><div class="graph-create_graph-section"><h3 id="graph.create_graph" class="dr-method"><i class="dr-trixie">&#160;</i>graph.create_graph()<a href="#graph.create_graph" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 51 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L51">&#x27ad;</a></h3>
<div class="extra" id="graph.create_graph-extra"></div></div><p>create a 3D array
</p>
<div class="dr-method"></div><div class="graph-get-section"><h3 id="graph.get" class="dr-method"><i class="dr-trixie">&#160;</i>graph.get(P)<a href="#graph.get" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 95 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L95">&#x27ad;</a></h3>
<div class="extra" id="graph.get-extra"></div></div><p>return array of object(&#39;s index) present at a particular point
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code> index in grid space</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-array">array</em> <span class="dr-description">array of objects in this cell</span></p>
</div><div class="graph-move-section"><h3 id="graph.move" class="dr-method"><i class="dr-trixie">&#160;</i>graph.move(i, A,B)<a href="#graph.move" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 133 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L133">&#x27ad;</a></h3>
<div class="extra" id="graph.move-extra"></div></div><p>an object i moves from A to B
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">i</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">A,B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code> point in world space</dd>
</dl>
</div><div class="graph-remove-section"><h3 id="graph.remove" class="dr-method"><i class="dr-trixie">&#160;</i>graph.remove(i, P)<a href="#graph.remove" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 119 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/graph.js#L119">&#x27ad;</a></h3>
<div class="extra" id="graph.remove-extra"></div></div><p>remove object i at P
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">i</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code> point in world space</dd>
</dl>
</div><div class="math-section"><h2 id="math" class="undefined"><i class="dr-trixie">&#160;</i>math<a href="#math" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 5 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L5">&#x27ad;</a></h2>
<div class="extra" id="math-extra"></div></div><p>math related functions
</p>
<div class="math-add-section"><h3 id="math.add" class="dr-method"><i class="dr-trixie">&#160;</i>math.add(A, B)<a href="#math.add" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 97 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L97">&#x27ad;</a></h3>
<div class="extra" id="math.add-extra"></div></div><div class="dr-method"><p>A+B
</p>
<dl class="dr-parameters"><dt class="dr-param">A, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point in <code>{x,y}</code></span></p>
</div><div class="math-bezier2-section"><h3 id="math.bezier2" class="dr-method"><i class="dr-trixie">&#160;</i>math.bezier2(A, C, B)<a href="#math.bezier2" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 64 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L64">&#x27ad;</a></h3>
<div class="extra" id="math.bezier2-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, C, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p>here <code>C</code> means the control point
</p>
<dl class="dr-parameters"><dt class="dr-param">steps</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">array of points on curve</span></p>
</div><div class="math-distance-section"><h3 id="math.distance" class="dr-method"><i class="dr-trixie">&#160;</i>math.distance(A, B)<a href="#math.distance" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 142 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L142">&#x27ad;</a></h3>
<div class="extra" id="math.distance-extra"></div></div><p>|AB|
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">length</span></p>
</div><div class="math-inbetween-section"><h3 id="math.inbetween" class="dr-method"><i class="dr-trixie">&#160;</i>math.inbetween(x, L, R)<a href="#math.inbetween" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 18 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L18">&#x27ad;</a></h3>
<div class="extra" id="math.inbetween-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">x, L, R</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">true if x is in between L and R</span></p>
</div><div class="math-intersect-section"><h3 id="math.intersect" class="dr-method"><i class="dr-trixie">&#160;</i>math.intersect(P1, P2, P3, P4)<a href="#math.intersect" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 201 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L201">&#x27ad;</a></h3>
<div class="extra" id="math.intersect-extra"></div></div><p>line-line intersection
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P1</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 1</dd>
<dt class="dr-param">P2</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 1</dd>
<dt class="dr-param">P3</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 2</dd>
<dt class="dr-param">P4</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point on line 2</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">return the intersection point of P1-P2 with P3-P4</span></p>
<p>reference: <a href="http://paulbourke.net/geometry/lineline2d/">http://paulbourke.net/geometry/lineline2d/</a>
</p>
</div><div class="math-length-section"><h3 id="math.length" class="dr-method"><i class="dr-trixie">&#160;</i>math.length(A)<a href="#math.length" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 131 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L131">&#x27ad;</a></h3>
<div class="extra" id="math.length-extra"></div></div><p>|A|
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">length</span></p>
</div><div class="math-negative-section"><h3 id="math.negative" class="dr-method"><i class="dr-trixie">&#160;</i>math.negative(A)<a href="#math.negative" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 153 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L153">&#x27ad;</a></h3>
<div class="extra" id="math.negative-extra"></div></div><p>-A
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point</span></p>
</div><div class="math-negligible-section"><h3 id="math.negligible" class="dr-method"><i class="dr-trixie">&#160;</i>math.negligible(M)<a href="#math.negligible" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 47 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L47">&#x27ad;</a></h3>
<div class="extra" id="math.negligible-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">M</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">true if M is very very small, with absolute value smaller than ~0.00000001</span></p>
</div><div class="math-normalize-section"><h3 id="math.normalize" class="dr-method"><i class="dr-trixie">&#160;</i>math.normalize(A)<a href="#math.normalize" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 164 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L164">&#x27ad;</a></h3>
<div class="extra" id="math.normalize-extra"></div></div><p>A/|A|
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point</span></p>
</div><div class="math-perpen-section"><h3 id="math.perpen" class="dr-method"><i class="dr-trixie">&#160;</i>math.perpen(A)<a href="#math.perpen" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 174 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L174">&#x27ad;</a></h3>
<div class="extra" id="math.perpen-extra"></div></div><p>perpendicular; anti-clockwise 90 degrees, assume origin in lower left
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
</dl>
</div><div class="math-round_d2-section"><h3 id="math.round_d2" class="dr-method"><i class="dr-trixie">&#160;</i>math.round_d2(I)<a href="#math.round_d2" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 37 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L37">&#x27ad;</a></h3>
<div class="extra" id="math.round_d2-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">I</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">round to decimal 2</span></p>
</div><div class="math-scale-section"><h3 id="math.scale" class="dr-method"><i class="dr-trixie">&#160;</i>math.scale(A, t)<a href="#math.scale" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 120 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L120">&#x27ad;</a></h3>
<div class="extra" id="math.scale-extra"></div></div><p>A*t
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">point</dd>
<dt class="dr-param">t</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point</span></p>
</div><div class="math-signed_area-section"><h3 id="math.signed_area" class="dr-method"><i class="dr-trixie">&#160;</i>math.signed_area(A, B, C)<a href="#math.signed_area" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 185 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L185">&#x27ad;</a></h3>
<div class="extra" id="math.signed_area-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, B, C</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-number">number</em> <span class="dr-description">signed area</span></p>
<p>the sign indicate clockwise/anti-clockwise points order
</p>
</div><div class="math-sub-section"><h3 id="math.sub" class="dr-method"><i class="dr-trixie">&#160;</i>math.sub(A, B)<a href="#math.sub" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 108 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/math.js#L108">&#x27ad;</a></h3>
<div class="extra" id="math.sub-extra"></div></div><p>A-B
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">A, B</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">points in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">point in <code>{x,y}</code></span></p>
</div><div class="sprite-section"><h2 id="sprite" class="dr-class"><i class="dr-trixie">&#160;</i>sprite(…)<a href="#sprite" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 56 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L56">&#x27ad;</a></h2>
<div class="extra" id="sprite-extra"></div></div><p>features:
<li>display and control sprites on page using <code>&lt;div&gt;</code> and <code>&lt;img&gt;</code> tag</li>
<li>multiple images for one sprite</li>
<li><strong>not</strong> using canvas for sprite animations</li>
<li>support style left/top and CSS transform, depending on browser support</li>
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">config</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>{
</p>
<dl class="dr-parameters"><dt class="dr-param">canvas</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>div</code> DOM node to create and append sprites to</dd>
<dt class="dr-param">div</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>div</code> DOM node, if specified, will use this <code>div</code> as sprite instead of creating a new one</dd>
</dl>
<p>you only choose between <code>canvas</code> or <code>div</code> option
</p>
<dl class="dr-parameters"><dt class="dr-param">wh</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">width and height</dd>
<dt class="dr-param">img</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">image list</dd>
</dl>
<p><code> {</code>
</p>
<dl class="dr-parameters"><dt class="dr-param">     name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">image path</dd>
</dl>
<p><code> }</code>
or
</p>
<dl class="dr-parameters"><dt class="dr-param">img</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">if you have only one image</dd>
</dl>
<p>}
config is one time only and will be dumped, without keeping a reference, after constructor returns
</p>
<pre class="javascript code"><code><b>var</b> sp_config=
{
	canvas: canvas,    <span class="c">// create and append a div to <b>this</b> node</span>
	wh: {x:<span class="d">100</span>,y:<span class="d">100</span>}, <span class="c">// width and height</span>
	img: <i>'test_sprite.png'</i> <span class="c">// image path</span>
}
<b>var</b> sp1<span class="s"> = </span><b>new</b> sprite(sp_config);
</code></pre>
<p>optionally, you can configure globally some options via requirejs
</p>
<pre class="javascript code"><code>requirejs.config(
{
	baseUrl: <i>"../"</i>, <span class="c">//be sure to put all requirejs config <b>in</b> one place</span>

	config:
	{
		<i>'F.core/sprite'</i>:
		{
			baseUrl: <i>'../sprites/'</i>, <span class="c">//base url prepended to all image paths</span>
			disable_css2dtransform: <b>false</b> <span class="c">//[optional], <b>null</b> by <b>default</b></span>
		}
	}
});
</code></pre>
<p>however, note that requirejs configuration must be done <strong>before</strong> any module loading,
and if you want to change some of the global options on runtime, you can do so by calling <a href="#sprite.masterconfig" class="dr-link">sprite.masterconfig</a>
</p>
</div><div class="sprite-add_img-section"><h3 id="sprite.add_img" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.add_img(imgpath, name)<a href="#sprite.add_img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 164 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L164">&#x27ad;</a></h3>
<div class="extra" id="sprite.add_img-extra"></div></div><div class="dr-method"><p>add new image
</p>
<dl class="dr-parameters"><dt class="dr-param">imgpath</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">newly created DOM <code>img</code> element</span></p>
<p>note that adding images can and should better be done in constructor <code>config</code>
</p>
</div><div class="sprite-attach-section"><h3 id="sprite.attach" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.attach()<a href="#sprite.attach" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 247 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L247">&#x27ad;</a></h3>
<div class="extra" id="sprite.attach-extra"></div></div><p>if previously removed, attach back to scene graph
</p>
<div class="dr-method"><p>an antagonist pair with <a href="#sprite.remove" class="dr-link">sprite.remove</a>
</p>
</div><div class="sprite-hide-section"><h3 id="sprite.hide" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.hide()<a href="#sprite.hide" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 258 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L258">&#x27ad;</a></h3>
<div class="extra" id="sprite.hide-extra"></div></div><p>temporary being hidden in rendering
</p>
<div class="dr-method"><p>the hide/show pair is conceptually &#39;weaker&#39; than remove/attach pair
</p>
</div><div class="sprite-masterconfig-section"><h3 id="sprite.masterconfig" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.masterconfig()<a href="#sprite.masterconfig" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 103 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L103">&#x27ad;</a></h3>
<div class="extra" id="sprite.masterconfig-extra"></div></div><div class="dr-method"><p>it depends whether these config will take effect, specifically, <code>baseUrl</code> will take effect on the next <code>add_img</code>,
and <code>disable_css2dtransform</code> will not take effect at all because css2dtransform support is built into prototype of sprite during module definition.
</p>
</div><div class="sprite-remove-section"><h3 id="sprite.remove" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.remove()<a href="#sprite.remove" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 236 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L236">&#x27ad;</a></h3>
<div class="extra" id="sprite.remove-extra"></div></div><p>remove from scene graph
</p>
<div class="dr-method"><p>the remove/attach pair means a &#39;strong removal&#39;.
under current implementation, it means remove from DOM
</p>
</div><div class="sprite-set_img_xy-section"><h3 id="sprite.set_img_xy" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_img_xy(P)<a href="#sprite.set_img_xy" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 223 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L223">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_img_xy-extra"></div></div><p>set the position of the image, note that coordinates should be negative to show something
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code></dd>
</dl>
</div><div class="sprite-set_wh-section"><h3 id="sprite.set_wh" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_wh(P)<a href="#sprite.set_wh" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 114 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L114">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_wh-extra"></div></div><div class="dr-method"><p>set width and height
</p>
<dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code></dd>
</dl>
</div><div class="sprite-set_xy-section"><h3 id="sprite.set_xy" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_xy(P)<a href="#sprite.set_xy" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 126 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L126">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_xy-extra"></div></div><div class="dr-method"><p>set x and y
</p>
<dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description"><code>{x,y}</code></dd>
</dl>
</div><div class="sprite-set_z-section"><h3 id="sprite.set_z" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.set_z(z)<a href="#sprite.set_z" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 151 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L151">&#x27ad;</a></h3>
<div class="extra" id="sprite.set_z-extra"></div></div><div class="dr-method"><p>set z index
</p>
<dl class="dr-parameters"><dt class="dr-param">z</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">larger index will show on top</dd>
</dl>
</div><div class="sprite-show-section"><h3 id="sprite.show" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.show()<a href="#sprite.show" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 267 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L267">&#x27ad;</a></h3>
<div class="extra" id="sprite.show-extra"></div></div><p>an antagonist pair with <a href="#sprite.hide" class="dr-link">sprite.hide</a>
</p>
<div class="dr-method"></div><div class="sprite-switch_img-section"><h3 id="sprite.switch_img" class="dr-method"><i class="dr-trixie">&#160;</i>sprite.switch_img(name)<a href="#sprite.switch_img" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 190 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/sprite.js#L190">&#x27ad;</a></h3>
<div class="extra" id="sprite.switch_img-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">the key you specified in key-value-pair object <code>config.img</code></dd>
</dl>
</div><div class="states-section"><h2 id="states" class="dr-class"><i class="dr-trixie">&#160;</i>states(state_def, init_obj)<a href="#states" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 92 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L92">&#x27ad;</a></h2>
<div class="extra" id="states-extra"></div></div><p><li>nested state transition system, a Hierarchical State Machine ( HSM )</li>
<li>intuitive state machine definition syntax</li>
<li>simple (not UML compatible) yet powerful enough for interactive gaming</li>
<li>reduces logical bugs if used as a programming paradigm</li>
</p>
<pre class="javascript code"><code><b>var</b> state_config =
{
	event:
	{
		entry: <i>'state1'</i>, <span class="c">//define the init state</span>
		entry: <b>function</b>(), <span class="c">// OR use an init <b>function</b></span>
		{
			<b>return</b> <i>'state1'</i>;
		}
	},

	state1:
	{
		event:
		{
			<i>'event1'</i>: <i>'state2'</i>,  <span class="c">//name of target state</span>
			<span class="c">//  on  :   to</span>

			<i>'event2'</i>: <b>function</b>(state, <span class="c">//a reference to the `states` instance</span>
							event,p1,p2) <span class="c">//event and its parameters</span>
			{
				alert(<b>this</b>.name); <span class="c">//gives <i>'state1'</i></span>
			alert(<b>this</b>.data.data_of_state1); <span class="c">//give <i>'hello'</i></span>
				<b>return</b> <i>'state2'</i>; <span class="c">//the returned state name will cause a transition to that state, nothing will happen <b>if</b> returned <b>null</b>/<b>undefined</b></span>
			} <span class="c">//,,,</span>

			entry: <b>function</b>(state,event,prev_state) <span class="c">//called on enter state, passing <b>in</b> previous state</span>
			{
				<span class="c">//some init</span>
			},

			exit: <b>function</b>, <span class="c">//called on leave state, passing <b>in</b> next state</span>

			<i>'guard'</i>: <b>function</b>(state,event,p1,p2) <span class="c">//<b>if</b> you consult a particular event of a state, you get its <b>return</b> value without causing any state transition</span>
			{
				<b>return</b> allow_transition(p1,p2);
			},
		},

		data:
		{	<span class="c">//memory associated <b>with</b> each state</span>
			data_of_state1: <i>'hello'</i>
		},

		state1_1:
		{
			event:
			{
				<i>'event1'</i>:<i>'state1'</i>,   <span class="c">//transit to superstate</span>
				<i>'event2'</i>:<i>'state1_2'</i>, <span class="c">//to other state within a superstate</span>
				<i>'event3'</i>:<i>'state2'</i>,   <span class="c">//out of the immediate superstate</span>
			},
		},

		state1_2: 
		{ <span class="c">//,,,</span>
		},

	},

	state2:
	{
		<span class="c">//,,,</span>
	} <span class="c">//,,, more states</span>
};
</code></pre>
<p></p>
<p>The critical feature of hierarchy is:
<li>a state machine in a certain state is also in that state&#39;s superstate.</li>
<li>an event/consult is propagated to the superstate of current state until handled.</li>
<li>in a state transition, a machine must entry a state&#39;s superstate before entering that state.</li>
<li>in a state transition, a machine must exit the current state before exiting the current state&#39;s superstate.</li>
see <a href="../sample/states.html">sample</a>
</p>
<div class="dr-class"><dl class="dr-parameters"><dt class="dr-param">state_def</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">state machine definition</dd>
<dt class="dr-param">init_obj</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">initializer object, content will be copied shallowly to <code>this</code></dd>
</dl>
<p>the reason for having an initializer is the state machine is running before the constructor returns
</p>
</div><div class="states-consult-section"><h3 id="states.consult" class="dr-method"><i class="dr-trixie">&#160;</i>states.consult(consult_event, [state], [arg])<a href="#states.consult" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 382 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L382">&#x27ad;</a></h3>
<div class="extra" id="states.consult-extra"></div></div><p>call an event handler and get its return value, without actually causing state transition
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">consult_event</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">event name</dd>
<dt class="dr-param">[state]</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">optional; if unspecified will assume current state</dd>
<dt class="dr-param">[arg]</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">extra args will be passed through to event handler of a state</dd>
</dl>
</div><div class="states-cur-section"><h3 id="states.cur" class="dr-property"><i class="dr-trixie">&#160;</i>states.cur<a href="#states.cur" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 130 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L130">&#x27ad;</a></h3>
<div class="extra" id="states.cur-extra"></div></div><p>defines the path to current state
</p>
<div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<pre class="javascript code"><code>       cur=[<i>'state1'</i>,<i>'state1_1'</i>,<i>'state1_1_1'</i>];
represents   state1-> state1_1-> state1_1_1(cur is here)
</code></pre>
</div><div class="states-cur_name-section"><h3 id="states.cur_name" class="dr-property"><i class="dr-trixie">&#160;</i>states.cur_name<a href="#states.cur_name" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 136 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L136">&#x27ad;</a></h3>
<div class="extra" id="states.cur_name-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">name of current state</dd>
</dl>
</div><div class="states-cur_state-section"><h3 id="states.cur_state" class="dr-property"><i class="dr-trixie">&#160;</i>states.cur_state<a href="#states.cur_state" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 142 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L142">&#x27ad;</a></h3>
<div class="extra" id="states.cur_state-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">reference to the current state in state_def</dd>
</dl>
</div><div class="states-event-section"><h3 id="states.event" class="dr-method"><i class="dr-trixie">&#160;</i>states.event(event, [arg])<a href="#states.event" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 321 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L321">&#x27ad;</a></h3>
<div class="extra" id="states.event-extra"></div></div><div class="dr-method"><p>fire an event
</p>
<dl class="dr-parameters"><dt class="dr-param">event</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[arg]</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">extra args will be passed through to event handler of a state</dd>
</dl>
</div><div class="states-event_delay-section"><h3 id="states.event_delay" class="dr-method"><i class="dr-trixie">&#160;</i>states.event_delay(event, delay, frame, [arg])<a href="#states.event_delay" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 351 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L351">&#x27ad;</a></h3>
<div class="extra" id="states.event_delay-extra"></div></div><div class="dr-method"><p>fire an event <code>event</code> after <code>delay</code> number of <code>frame</code> events
</p>
<dl class="dr-parameters"><dt class="dr-param">event</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">delay</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">frame</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[arg]</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">extra args will be passed through to event handler of a state</dd>
</dl>
</div><div class="states-evlay-section"><h3 id="states.evlay" class="dr-property"><i class="dr-trixie">&#160;</i>states.evlay<a href="#states.evlay" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 118 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L118">&#x27ad;</a></h3>
<div class="extra" id="states.evlay-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">array of delayed events</dd>
</dl>
</div><div class="states-log-section"><h3 id="states.log" class="dr-property"><i class="dr-trixie">&#160;</i>states.log<a href="#states.log" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 177 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L177">&#x27ad;</a></h3>
<div class="extra" id="states.log-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>log state transitions in form of
</p>
<pre class="javascript code"><code>[
{type:<i>'t'</i>, from:path, to:path}, <span class="c">//transition</span>
{type:<i>'c'</i>, event:event, target:state, <b>return</b>:result}, <span class="c">//call</span>
]
</code></pre>
</div><div class="states-log_enable-section"><h3 id="states.log_enable" class="dr-property"><i class="dr-trixie">&#160;</i>states.log_enable<a href="#states.log_enable" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 152 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L152">&#x27ad;</a></h3>
<div class="extra" id="states.log_enable-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">not log by default</dd>
</dl>
</div><div class="states-log_filter-section"><h3 id="states.log_filter" class="dr-property"><i class="dr-trixie">&#160;</i>states.log_filter<a href="#states.log_filter" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 158 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L158">&#x27ad;</a></h3>
<div class="extra" id="states.log_filter-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">a function to return true to not log an item</dd>
</dl>
</div><div class="states-log_size-section"><h3 id="states.log_size" class="dr-property"><i class="dr-trixie">&#160;</i>states.log_size<a href="#states.log_size" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 164 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L164">&#x27ad;</a></h3>
<div class="extra" id="states.log_size-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">100 lines by default</dd>
</dl>
</div><div class="states-propagate_down-section"><h3 id="states.propagate_down" class="dr-method"><i class="dr-trixie">&#160;</i>states.propagate_down(level, fun, [node])<a href="#states.propagate_down" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 189 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L189">&#x27ad;</a></h3>
<div class="extra" id="states.propagate_down-extra"></div></div><div class="dr-method"><p>propagate an event from top to down, performing some computation on each node
</p>
<dl class="dr-parameters"><dt class="dr-param">level</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">max. no. of levels to go through</dd>
<dt class="dr-param">fun</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[node]</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">reference to a state object, like <code>state_config.state1.state1_1</code>,</dd>
</dl>
<p>if unspecified, assume from <code>root</code>
</p>
</div><div class="states-propagate_up-section"><h3 id="states.propagate_up" class="dr-method"><i class="dr-trixie">&#160;</i>states.propagate_up(level, fun, [node])<a href="#states.propagate_up" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 215 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L215">&#x27ad;</a></h3>
<div class="extra" id="states.propagate_up-extra"></div></div><div class="dr-method"><p>propagate an event from a node to root, performing some computation on each node
</p>
<dl class="dr-parameters"><dt class="dr-param">level</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">max. no. of levels to go through</dd>
<dt class="dr-param">fun</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[node]</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">optional; if not specified assume from node of current state</dd>
</dl>
</div><div class="states-search-section"><h3 id="states.search" class="dr-method"><i class="dr-trixie">&#160;</i>states.search(state, [node])<a href="#states.search" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 419 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L419">&#x27ad;</a></h3>
<div class="extra" id="states.search-extra"></div></div><div class="dr-method"><p>search for the path of a state
</p>
<dl class="dr-parameters"><dt class="dr-param">state</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">[node]</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">only search under this node. if unspecified, assume <code>root</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-array">array</em> <span class="dr-description">representing path</span></p>
</div><div class="states-show_log-section"><h3 id="states.show_log" class="dr-method"><i class="dr-trixie">&#160;</i>states.show_log([filter])<a href="#states.show_log" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 526 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L526">&#x27ad;</a></h3>
<div class="extra" id="states.show_log-extra"></div></div><p>show the log in human readable text
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">[filter]</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">optional; return true to hide an item</dd>
</dl>
<p>sample log
</p>
<pre class="javascript code"><code>(oldest at top)
call <i>'consultant'</i> of A_1_1_1, returning hello
call <i>'go'</i> of A_1_1_1, returning A_2_1
call <i>'exit'</i> of A_1_1_1, returning <b>undefined</b>
call <i>'exit'</i> of A_1_1, returning <b>undefined</b>
call <i>'exit'</i> of A_1, returning <b>undefined</b>
transition from A,A_1,A_1_1,A_1_1_1 to A,A_2,A_2_1
call <i>'entry'</i> of A_2, returning <b>undefined</b>
call <i>'entry'</i> of A_2_1, returning <b>undefined</b>
</code></pre>
</div><div class="states-state-section"><h3 id="states.state" class="dr-property"><i class="dr-trixie">&#160;</i>states.state<a href="#states.state" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 102 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L102">&#x27ad;</a></h3>
<div class="extra" id="states.state-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">states tree, can be altered dynamically</dd>
</dl>
</div><div class="states-state_at-section"><h3 id="states.state_at" class="dr-method"><i class="dr-trixie">&#160;</i>states.state_at()<a href="#states.state_at" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 401 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/states.js#L401">&#x27ad;</a></h3>
<div class="extra" id="states.state_at-extra"></div></div><div class="dr-method"><p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">state specified by path A</span></p>
<pre class="javascript code"><code>sta.state_at([<i>'state1'</i>,<i>'state1_1'</i>,<i>'state1_1_1'</i>]);
</code></pre>
</div><div class="support-section"><h2 id="support" class="undefined"><i class="dr-trixie">&#160;</i>support<a href="#support" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 14 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/support.js#L14">&#x27ad;</a></h2>
<div class="extra" id="support-extra"></div></div><p>test for browser support of certain technologies, most code is adapted from other places.
including
<li><a href="https://github.com/craftyjs/Crafty/blob/master/src/extensions.js">Crafty/extensions.js</a></li>
<li><a href="https://gist.github.com/3626934">https://gist.github.com/3626934</a></li>
<li><a href="https://gist.github.com/3626934">https://gist.github.com/1579671</a></li>
<a href="../sample/support.html">example</a>
</p>
<iframe src="../sample/support.html" width="800" height="200"></iframe>
<div class="support-css2dtransform-section"><h3 id="support.css2dtransform" class="dr-property"><i class="dr-trixie">&#160;</i>support.css2dtransform<a href="#support.css2dtransform" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 37 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/support.js#L37">&#x27ad;</a></h3>
<div class="extra" id="support.css2dtransform-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">if supported, style property name with correct prefix</dd>
</dl>
<div class="dr-property"><p>you can do something like
</p>
<pre class="javascript code"><code><b>if</b>( support.css2dtransform)
	element.style[support.css2dtransform]= <i>'translate('</i>+P.x+<i>'px,'</i>+P.y+<i>'px) '</i>;
</code></pre>
</div><div class="support-css3dtransform-section"><h3 id="support.css3dtransform" class="dr-property"><i class="dr-trixie">&#160;</i>support.css3dtransform<a href="#support.css3dtransform" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 42 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/support.js#L42">&#x27ad;</a></h3>
<div class="extra" id="support.css3dtransform-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">if supported, style property name with correct prefix</dd>
</dl>
<div class="dr-property"></div><div class="support-mobile-section"><h3 id="support.mobile" class="dr-property"><i class="dr-trixie">&#160;</i>support.mobile<a href="#support.mobile" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 19 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/support.js#L19">&#x27ad;</a></h3>
<div class="extra" id="support.mobile-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">mobile device name</dd>
</dl>
<div class="dr-property"></div><div class="support-prefix-section"><h3 id="support.prefix" class="dr-property"><i class="dr-trixie">&#160;</i>support.prefix<a href="#support.prefix" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 24 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/support.js#L24">&#x27ad;</a></h3>
<div class="extra" id="support.prefix-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">browser prefix</dd>
</dl>
<div class="dr-property"></div><div class="support-version-section"><h3 id="support.version" class="dr-property"><i class="dr-trixie">&#160;</i>support.version<a href="#support.version" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 29 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/support.js#L29">&#x27ad;</a></h3>
<div class="extra" id="support.version-extra"></div></div><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">browser major version</dd>
</dl>
<div class="dr-property"></div><div class="util-section"><h2 id="util" class="undefined"><i class="dr-trixie">&#160;</i>util<a href="#util" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 5 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L5">&#x27ad;</a></h2>
<div class="extra" id="util-extra"></div></div><p>javascript utilities
</p>
<div class="util-arr_search-section"><h3 id="util.arr_search" class="dr-method"><i class="dr-trixie">&#160;</i>util.arr_search(arr, fc_criteria, [fc_replace], [search_all])<a href="#util.arr_search" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 89 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L89">&#x27ad;</a></h3>
<div class="extra" id="util.arr_search-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">arr</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">target to be searched</dd>
<dt class="dr-param">fc_criteria</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">return true when an accepted element is passed in</dd>
<dt class="dr-param">[fc_replace]</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">to return a replacement value when original value is passed in</dd>
<dt class="dr-param">[search_all]</dt>
<dd class="dr-type"><em class="dr-type-boolean">boolean</em></dd>
<dd class="dr-description">if true, will search through entire array before returning the list of indices, otherwise, will return immediately at the first accepted element</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-array">array</em> <span class="dr-description">if <code>search_all</code> is true</span></p>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">if <code>search_all</code> if false</span></p>
</div><div class="util-css-section"><h3 id="util.css" class="dr-method"><i class="dr-trixie">&#160;</i>util.css(filename)<a href="#util.css" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 29 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L29">&#x27ad;</a></h3>
<div class="extra" id="util.css-extra"></div></div><p>attach a stylesheet to page
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">filename</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
</div><div class="util-extend_object-section"><h3 id="util.extend_object" class="dr-method"><i class="dr-trixie">&#160;</i>util.extend_object(obj1, obj2)<a href="#util.extend_object" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 142 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L142">&#x27ad;</a></h3>
<div class="extra" id="util.extend_object-extra"></div></div><p>extend obj1 with all members of obj2
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">obj1, obj2</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">a modified obj1</span></p>
</div><div class="util-extract_array-section"><h3 id="util.extract_array" class="dr-method"><i class="dr-trixie">&#160;</i>util.extract_array(array, prop)<a href="#util.extract_array" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 256 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L256">&#x27ad;</a></h3>
<div class="extra" id="util.extract_array-extra"></div></div><div class="dr-method"><p>extract properties from an array of objects
</p>
<pre class="javascript code"><code><span class="c">//say we have</span>
[ {x:x1,y:y1}, {x:x2,y:y2}, {x:x3,y:y3},,,]
<span class="c">//we want to extract it into</span>
{
  x:
	[ x1, x2, x3,,, ],
  y:
	[ y1, y2, y3,,, ]
}
</code></pre>
<dl class="dr-parameters"><dt class="dr-param">array</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">prop</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">property name</dd>
</dl>
<p>or
</p>
<dl class="dr-parameters"><dt class="dr-param">prop</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">array of property name</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-array">array</em> <span class="dr-description">extracted array</span></p>
</div><div class="util-make_array-section"><h3 id="util.make_array" class="dr-method"><i class="dr-trixie">&#160;</i>util.make_array(target)<a href="#util.make_array" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 64 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L64">&#x27ad;</a></h3>
<div class="extra" id="util.make_array-extra"></div></div><div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">target</dt>
<dd class="dr-type"><em class="dr-type-any">any</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p>if target is:
</p>
<dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">returns target as is.</dd>
<dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">returns object encapsulated in an array.</dd>
<dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-falsy">falsy</em></dd>
<dd class="dr-description">(null, undefined or zero), returns an empty array.</dd>
</dl>
</div><div class="util-push_unique-section"><h3 id="util.push_unique" class="dr-method"><i class="dr-trixie">&#160;</i>util.push_unique(array, element)<a href="#util.push_unique" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 125 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L125">&#x27ad;</a></h3>
<div class="extra" id="util.push_unique-extra"></div></div><p>push only if not existed in array
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">array</dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">element</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-boolean">boolean</em> <span class="dr-description">true if added</span></p>
</div><div class="util-to_text-section"><h3 id="util.to_text" class="dr-method"><i class="dr-trixie">&#160;</i>util.to_text(obj, name, [sep], [pretext], [filter], [TTL])<a href="#util.to_text" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 189 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/util.js#L189">&#x27ad;</a></h3>
<div class="extra" id="util.to_text-extra"></div></div><p>convert an object into JSON text
</p>
<p>most of the time you should use built-in <code>JSON.stringify</code> instead
</p>
<div class="dr-method"><dl class="dr-parameters"><dt class="dr-param">obj</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">&#160;</dd>
<dt class="dr-param">name</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">the object&#39;s name</dd>
<dt class="dr-param">[sep]</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">separator, default as <code>\n</code></dd>
<dt class="dr-param">[pretext]</dt>
<dd class="dr-type"><em class="dr-type-string">string</em></dd>
<dd class="dr-description">used in recursion only, set it to null</dd>
<dt class="dr-param">[filter]</dt>
<dd class="dr-type"><em class="dr-type-function">function</em></dd>
<dd class="dr-description">a filter <code>function(p,P)</code> passing in name p and object P, return 1 to hide the attribute, OR return a string to be shown</dd>
<dt class="dr-param">[TTL]</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">time-to-live to prevent infinite looping</dd>
</dl>
<pre class="javascript code"><code><b>var</b> obj={};
obj.a={};
obj.a.x=<span class="d">1</span>;
obj.a.y=<span class="d">1</span>;
obj.b=<i>'hello'</i>;
obj.c=<span class="d">12</span>;
console.log(util.to_text(obj,<i>'obj'</i>));
<span class="c">//outputs:</span>
obj:
{
	a:
	{
		<i>'x'</i>: <span class="d">1</span>,
		<i>'y'</i>: <span class="d">1</span>
	},
	<i>'b'</i>: <i>'hello'</i>,
	<i>'c'</i>: <span class="d">12</span>
}
</code></pre>
</div><div class="world-section"><h2 id="world" class="dr-class"><i class="dr-trixie">&#160;</i>world()<a href="#world" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 14 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L14">&#x27ad;</a></h2>
<div class="extra" id="world-extra"></div></div><div class="dr-class"><p>the world coordinate system
</p>
<pre class="javascript code"><code>z              y              O-------x
|  y          <span class="s"> | </span>             |
|<span class="s"> / </span>      =>  <span class="s"> | </span>         =>  |
|/            <span class="s"> | </span>             |
O-------x      O-------x      y
  world        projected        screen
</code></pre>
<p><a href="../sample/world.html">example</a>
</p>
<iframe src="../sample/world.html?static" width="750" height="550"></iframe>
</div><div class="world-P-section"><h3 id="world.P" class="dr-property"><i class="dr-trixie">&#160;</i>world.P<a href="#world.P" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 25 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L25">&#x27ad;</a></h3>
<div class="extra" id="world.P-extra"></div></div><p>points in 3d space
</p>
<div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">of points in <code>{x,y,z}</code></dd>
</dl>
</div><div class="world-area-section"><h3 id="world.area" class="dr-property"><i class="dr-trixie">&#160;</i>world.area<a href="#world.area" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 39 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L39">&#x27ad;</a></h3>
<div class="extra" id="world.area-extra"></div></div><p>width and height of canvas
</p>
<div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in <code>{x,y}</code></dd>
</dl>
</div><div class="world-pan-section"><h3 id="world.pan" class="dr-property"><i class="dr-trixie">&#160;</i>world.pan<a href="#world.pan" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 58 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L58">&#x27ad;</a></h3>
<div class="extra" id="world.pan-extra"></div></div><p>pan in view space
</p>
<div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in <code>{x,y}</code></dd>
</dl>
</div><div class="world-pp-section"><h3 id="world.pp" class="dr-property"><i class="dr-trixie">&#160;</i>world.pp<a href="#world.pp" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 32 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L32">&#x27ad;</a></h3>
<div class="extra" id="world.pp-extra"></div></div><p>points projected onto 2d space
</p>
<div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-array">array</em></dd>
<dd class="dr-description">of points in <code>{x,y}</code></dd>
</dl>
</div><div class="world-project-section"><h3 id="world.project" class="dr-method"><i class="dr-trixie">&#160;</i>world.project(P)<a href="#world.project" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 75 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L75">&#x27ad;</a></h3>
<div class="extra" id="world.project-extra"></div></div><p>project a single point
</p>
<div class="dr-method"><p>it will be faster (saves many computations) by using project_all to project whole batch
</p>
<dl class="dr-parameters"><dt class="dr-param">P</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in <code>{x,y,z}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">in <code>{x,y}</code></span></p>
</div><div class="world-project_all-section"><h3 id="world.project_all" class="dr-method"><i class="dr-trixie">&#160;</i>world.project_all([A,B])<a href="#world.project_all" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 105 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L105">&#x27ad;</a></h3>
<div class="extra" id="world.project_all-extra"></div></div><p>project from 3d world space to 2d space.
</p>
<dl class="dr-parameters"><dt class="dr-param">[A,B]</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">range of points to project, if upspecified assume 0 and world.P.length</dd>
</dl>
<pre class="javascript code"><code><b>for</b> (<b>var</b> i=A; i&lt;B; i++) <span class="c">//project world.P[i] to world.pp[i]</span>
</code></pre>
<p>points in <a href="#world.P" class="dr-link">world.P</a> are projected and result is stored in <a href="#world.pp" class="dr-link">world.pp</a>
</p>
<div class="dr-method"></div><div class="world-tho-section"><h3 id="world.tho" class="dr-property"><i class="dr-trixie">&#160;</i>world.tho<a href="#world.tho" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 45 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L45">&#x27ad;</a></h3>
<div class="extra" id="world.tho-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">view angle o in degree (rotate using z axis)</dd>
</dl>
</div><div class="world-thp-section"><h3 id="world.thp" class="dr-property"><i class="dr-trixie">&#160;</i>world.thp<a href="#world.thp" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 51 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L51">&#x27ad;</a></h3>
<div class="extra" id="world.thp-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">view angle p in degree (rotate using x axis)</dd>
</dl>
</div><div class="world-view-section"><h3 id="world.view" class="dr-method"><i class="dr-trixie">&#160;</i>world.view(pp)<a href="#world.view" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 145 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L145">&#x27ad;</a></h3>
<div class="extra" id="world.view-extra"></div></div><p>convert a single point from projected 2d space to view space
</p>
<div class="dr-method"><p>apply pan and zoom to calculate final coordinate on screen
</p>
<dl class="dr-parameters"><dt class="dr-param">pp</dt>
<dd class="dr-type"><em class="dr-type-object">object</em></dd>
<dd class="dr-description">in <code>{x,y}</code></dd>
</dl>
<p class="dr-returns"><strong class="dr-title">Returns:</strong> <em class="dr-type-object">object</em> <span class="dr-description">in <code>{x,y}</code></span></p>
</div><div class="world-view_all-section"><h3 id="world.view_all" class="dr-method"><i class="dr-trixie">&#160;</i>world.view_all([A,B])<a href="#world.view_all" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 159 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L159">&#x27ad;</a></h3>
<div class="extra" id="world.view_all-extra"></div></div><p>convert from projected 2d space to view space
</p>
<dl class="dr-parameters"><dt class="dr-param">[A,B]</dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">range of points to project, if upspecified assume 0 and world.pp.length</dd>
</dl>
<p>points in <a href="#world.pp" class="dr-link">world.pp</a> are transformed and result is stored back in <a href="#world.pp" class="dr-link">world.pp</a>
</p>
<div class="dr-method"></div><div class="world-zoom-section"><h3 id="world.zoom" class="dr-property"><i class="dr-trixie">&#160;</i>world.zoom<a href="#world.zoom" title="Link to this section" class="dr-hash">&#x2693;</a><a class="dr-sourceline" title="Go to line 64 in the source" href="https:/github.com/tyt2y3/F.core/blob/master/world.js#L64">&#x27ad;</a></h3>
<div class="extra" id="world.zoom-extra"></div></div><div class="dr-property"><dl class="dr-parameters"><dt class="dr-param"></dt>
<dd class="dr-type"><em class="dr-type-number">number</em></dd>
<dd class="dr-description">zoom factor in view space</dd>
</dl>
</div></div></div>
<script>(function (ol) {
    if (!ol) {
        return;
    }
    var li = document.createElement("li"),
        isABBR = function (str, abbr) {
            var letters = abbr.toUpperCase().split(""),
                first = letters.shift(),
                rg = new RegExp("^[" + first.toLowerCase() + first + "][a-z]*" + letters.join("[a-z]*") + "[a-z]*$");
            return !!String(str).match(rg);
        },
        score = function (me, search) {
            me = String(me);
            search = String(search);
            var score = 0,
                chunk;
            if (me == search) {
                return 1;
            }
            if (!me || !search) {
                return 0;
            }
            if (isABBR(me, search)) {
                return .9;
            }
            score = 0;
            chunk = me.toLowerCase();
            for (var j, i = 0, ii = search.length; i < ii; i++) {
                j = chunk.indexOf(search.charAt(i));
                if (~j) {
                    chunk = chunk.substring(j + 1);
                    score += 1 / (j + 1);
                }
            }
            score = Math.max(score / ii - Math.abs(me.length - ii) / me.length / 2, 0);
            return score;
        };
    li.innerHTML = '<input type="search" id="dr-filter" results="0">';
    var lis = ol.getElementsByTagName("span"),
        names = [],
        rgName = /[^\.\(]*(?=(\(\))?$)/;
    for (var i = 0, ii = lis.length; i < ii; i++) {
        names[i] = {
            li: lis[i].parentNode.parentNode,
            text: lis[i].innerHTML.match(rgName)[0]
        };
    }
    ol.insertBefore(li, ol.firstChild);
    var input = document.getElementById("dr-filter"),
		sorter = function (a, b) {
            return b.weight - a.weight;
        };
    input.style.width = "100%";
    input.style.marginTop = "10px";
    input.onclick = input.onchange = input.onkeydown = input.onkeyup = function () {
        var v = input.value,
            res = [];
        if (v.length > 1) {
            for (var i = 0, ii = names.length; i < ii; i++) {
                res[i] = {
                    li: names[i].li,
                    weight: score(names[i].text, v)
                };
            }
            res.sort(sorter);
            for (i = 0, ii = res.length; i < ii; i++) {
                ol.appendChild(res[i].li);
            }
        } else {
            for (i = 0, ii = names.length; i < ii; i++) {
                ol.appendChild(names[i].li);
            }
        }
    };
})(document.getElementById("dr-toc"));
</script>
</body></html>